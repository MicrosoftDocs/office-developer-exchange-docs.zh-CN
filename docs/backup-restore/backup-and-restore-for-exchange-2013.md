---
title: Exchange 备份和还原
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 329902d9-0ecb-4cfb-86dd-5ce863deff3f
description: 查找有关为 Exchange 2013 创建备份和还原应用程序的信息。
ms.openlocfilehash: 1c5d99be60501fd1c4414ea22294bd05645bb0a7
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/03/2020
ms.locfileid: "44455238"
---
# <a name="backup-and-restore-for-exchange"></a><span data-ttu-id="951ce-103">Exchange 备份和还原</span><span class="sxs-lookup"><span data-stu-id="951ce-103">Backup and restore for Exchange</span></span>
  
<span data-ttu-id="951ce-104">Exchange Server 2013 提供了数据库可用性组（Dag），可帮助保持存储数据的安全和可用性，并减少对自定义备份和还原应用程序的需求。</span><span class="sxs-lookup"><span data-stu-id="951ce-104">Exchange Server 2013 provides Database Availability Groups (DAGs), which help to keep stored data secure and available, and reduce the need for custom backup and restore applications.</span></span> <span data-ttu-id="951ce-105">Dag 启用非现场数据冗余，以帮助确保您不会丢失数据。</span><span class="sxs-lookup"><span data-stu-id="951ce-105">DAGs enable off-site data redundancy to help ensure that you won't lose data.</span></span> <span data-ttu-id="951ce-106">但是，许多灾难恢复计划继续包含更传统的备份和还原方法以及系统（包括自定义应用程序），以实现 DAG 的冗余。</span><span class="sxs-lookup"><span data-stu-id="951ce-106">However, many disaster recovery plans continue to include more traditional backup and restore methods and systems, including custom applications, for redundancy with the DAG.</span></span> <span data-ttu-id="951ce-107">为了帮助确保组织中的数据可用性和冗余，您可以创建使用 Exchange Server 和 Windows Server 操作系统技术来备份和还原 Exchange 数据的自定义应用程序。</span><span class="sxs-lookup"><span data-stu-id="951ce-107">To help ensure data availability and redundancy in your organization, you can create custom applications that use Exchange Server and Windows Server operating system technologies to back up and restore your Exchange data.</span></span>

<span data-ttu-id="951ce-108"><a name="bk_plugin"> </a></span><span class="sxs-lookup"><span data-stu-id="951ce-108"><a name="bk_plugin"> </a></span></span>

## <a name="backup-technologies-in-exchange-2013"></a><span data-ttu-id="951ce-109">Exchange 2013 中的备份技术</span><span class="sxs-lookup"><span data-stu-id="951ce-109">Backup technologies in Exchange 2013</span></span>

<span data-ttu-id="951ce-110">Exchange 2013 包括 Windows Server 备份的插件，管理员可使用该插件进行 Exchange 数据的基于 VSS 的备份。</span><span class="sxs-lookup"><span data-stu-id="951ce-110">Exchange 2013 includes a plug-in for Windows Server Backup that administrators can use to make VSS-based backups of Exchange data.</span></span> <span data-ttu-id="951ce-111">管理员还可以使用 Windows Server 备份来备份和还原 Exchange 数据库。</span><span class="sxs-lookup"><span data-stu-id="951ce-111">Administrators can also use Windows Server Backup to back up and restore Exchange databases.</span></span> <span data-ttu-id="951ce-112">如果要为 Exchange 2013 创建备份和还原应用程序，您需要创建支持 exchange 2013 VSS 编写器的 Exchange 感知应用程序，并使用 CHKSGFILES API 验证该备份的一致性。</span><span class="sxs-lookup"><span data-stu-id="951ce-112">If you are creating a backup and restore application for Exchange 2013, you need to create an Exchange-aware application that supports the VSS writer for Exchange 2013, and use the CHKSGFILES API to validate the consistency of that backup.</span></span> <span data-ttu-id="951ce-113">有关详细信息，请参阅[使用 Exchange 2013 中的 CHKSGFILES API 验证备份完整性](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="951ce-113">For more information, see [Validate backup integrity by using the CHKSGFILES API in Exchange 2013](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md).</span></span>

<span data-ttu-id="951ce-114"><a name="bk_vsswriter"> </a></span><span class="sxs-lookup"><span data-stu-id="951ce-114"><a name="bk_vsswriter"> </a></span></span>

## <a name="vss-writer-in-exchange-2013"></a><span data-ttu-id="951ce-115">Exchange 2013 中的 VSS 编写器</span><span class="sxs-lookup"><span data-stu-id="951ce-115">VSS writer in Exchange 2013</span></span>

<span data-ttu-id="951ce-116">Exchange 2013 在 Exchange Server 2010 和 Exchange Server 2007 中引入了对 VSS 写入器体系结构的重大更改。</span><span class="sxs-lookup"><span data-stu-id="951ce-116">Exchange 2013 introduces a significant change to the VSS writer architecture in Exchange Server 2010 and Exchange Server 2007.</span></span> <span data-ttu-id="951ce-117">Exchange 2010 和 Exchange 2007 包括两个 VSS 编写器：一个在 Exchange 信息存储服务（store.exe）中，一个在 Exchange 复制服务（msexchangerepl）内。</span><span class="sxs-lookup"><span data-stu-id="951ce-117">Exchange 2010 and Exchange 2007 include two VSS writers: one inside the Exchange Information Store service (store.exe) and one inside the Exchange Replication service (msexchangerepl.exe).</span></span> <span data-ttu-id="951ce-118">在 Exchange 2013 中，VSS 编写器功能位于 Exchange 复制服务中。</span><span class="sxs-lookup"><span data-stu-id="951ce-118">In Exchange 2013, the VSS writer functionality is located in the Exchange Replication service.</span></span> <span data-ttu-id="951ce-119">您的备份和还原应用程序使用新的 VSS 编写器（称为 Microsoft Exchange 编写器）来备份主动数据库副本和被动数据库副本，并还原备份的数据库副本。</span><span class="sxs-lookup"><span data-stu-id="951ce-119">Your backup and restore application uses the new VSS writer, called the Microsoft Exchange Writer, to back up active and passive database copies, and to restore backed up database copies.</span></span> <span data-ttu-id="951ce-120">尽管新的 VSS 编写器在 Exchange 复制服务中运行，但必须运行 Exchange 信息存储服务，编写器才能使用。</span><span class="sxs-lookup"><span data-stu-id="951ce-120">Although the new VSS writer runs in the Exchange Replication service, the Exchange Information Store service must be running in order for the writer to be available.</span></span> <span data-ttu-id="951ce-121">因此，为了能够备份或还原 Exchange 数据库，这两项服务都是必需的。</span><span class="sxs-lookup"><span data-stu-id="951ce-121">As a result, both services are required to back up or restore Exchange databases.</span></span>
  
<span data-ttu-id="951ce-122">虽然 Exchange 2013 中更新了 VSS 编写器体系结构，但基础功能尚未更改。</span><span class="sxs-lookup"><span data-stu-id="951ce-122">Although the VSS writer architecture was updated in Exchange 2013, the underlying functionality has not changed.</span></span> <span data-ttu-id="951ce-123">如果为 Exchange 2010 创建了备份和还原应用程序，则无需对 Exchange 2013 的应用程序进行任何更改。</span><span class="sxs-lookup"><span data-stu-id="951ce-123">If you created a backup and restore application for Exchange 2010, you do not need to make any changes to your application for Exchange 2013.</span></span> <span data-ttu-id="951ce-124">请务必使用最新文件重新编译应用程序以确保兼容性。</span><span class="sxs-lookup"><span data-stu-id="951ce-124">Be sure to recompile your application with the latest files to ensure compatibility.</span></span> <span data-ttu-id="951ce-125">对于为 Exchange 2007 或更早版本创建的备份和还原应用程序，需要重写您的代码以使用最新的 CHKSGFILES API。</span><span class="sxs-lookup"><span data-stu-id="951ce-125">For backup and restore applications created for Exchange 2007 or earlier versions, you will need to rewrite your code to use the latest CHKSGFILES API.</span></span>
  
## <a name="what-you-need-to-know-about-vss-backup-and-restore"></a><span data-ttu-id="951ce-126">您需要了解的有关 VSS 备份和还原的内容</span><span class="sxs-lookup"><span data-stu-id="951ce-126">What you need to know about VSS backup and restore</span></span>

|<span data-ttu-id="951ce-127">如果你想要了解 .。。</span><span class="sxs-lookup"><span data-stu-id="951ce-127">If you're wondering about…</span></span>|<span data-ttu-id="951ce-128">请参阅这个</span><span class="sxs-lookup"><span data-stu-id="951ce-128">Read this</span></span>|
|:-----|:-----|
|<span data-ttu-id="951ce-129">应用程序体系结构</span><span class="sxs-lookup"><span data-stu-id="951ce-129">Application architectures</span></span>  <br/> |<span data-ttu-id="951ce-130">使用 VSS 备份 Exchange 数据库的备份和还原应用程序通常由执行备份、计划服务的后台服务以及控制和配置备份和还原系统的 Windows GUI 应用程序控制台组成。</span><span class="sxs-lookup"><span data-stu-id="951ce-130">Backup and restore applications that use VSS to back up Exchange databases typically consist of a background service that performs the backup, a scheduling service, and a Windows GUI application console that controls and configures the backup and restore system.</span></span>  <br/> |
|<span data-ttu-id="951ce-131">远程使用情况</span><span class="sxs-lookup"><span data-stu-id="951ce-131">Remote usage</span></span>  <br/> |<span data-ttu-id="951ce-132">使用 VSS 备份 Exchange 服务器的应用程序必须在运行 Exchange 存储进程的 Windows Server 2008 计算机上运行。</span><span class="sxs-lookup"><span data-stu-id="951ce-132">Applications that use VSS to back up Exchange servers must run on the Windows Server 2008 computer on which the Exchange store process is running.</span></span> <span data-ttu-id="951ce-133">由于大型存储系统的灵活性，承载存储卷的硬件可能不会物理上是运行 Windows Server 2008 的计算机的一部分。</span><span class="sxs-lookup"><span data-stu-id="951ce-133">Because of the flexibility in large storage systems, the hardware hosting the storage volumes might not physically be part of the computer running Windows Server 2008.</span></span>  <br/> |
|<span data-ttu-id="951ce-134">语言和工具</span><span class="sxs-lookup"><span data-stu-id="951ce-134">Languages and tools</span></span>  <br/> |<span data-ttu-id="951ce-135">可以使用任何 COM 兼容的语言来使用 VSS。</span><span class="sxs-lookup"><span data-stu-id="951ce-135">You can use any COM-compatible language to use VSS.</span></span> <span data-ttu-id="951ce-136">它最常用于用 c + + 编写的应用程序。</span><span class="sxs-lookup"><span data-stu-id="951ce-136">It is most frequently used in applications written in C++.</span></span> <span data-ttu-id="951ce-137">因为您必须让 Exchange 存储脱机创建卷影副本，所以备份应用程序通常是时间敏感的，在大多数情况下，使用 Visual Basic 或 VBScript 这样的语言就会变得不切实际。</span><span class="sxs-lookup"><span data-stu-id="951ce-137">Because you have to take the Exchange store offline to create shadow copies, backup applications are typically time-sensitive, which in most cases makes using languages like Visual Basic or VBScript impractical.</span></span>  <br/> |
|<span data-ttu-id="951ce-138">托管实现</span><span class="sxs-lookup"><span data-stu-id="951ce-138">Managed implementation</span></span>  <br/> |<span data-ttu-id="951ce-139">您可以通过 COM 互操作程序集在托管代码环境中使用 VSS Api。</span><span class="sxs-lookup"><span data-stu-id="951ce-139">You can use the VSS APIs in a managed code environment via a COM Interop Assembly.</span></span>  <br/> |
|<span data-ttu-id="951ce-140">可脚本化</span><span class="sxs-lookup"><span data-stu-id="951ce-140">Scriptable</span></span>  <br/> |<span data-ttu-id="951ce-141">可以，但不建议这样做。</span><span class="sxs-lookup"><span data-stu-id="951ce-141">Yes, but not recommended.</span></span>  <br/> |
|<span data-ttu-id="951ce-142">可用测试和调试工具</span><span class="sxs-lookup"><span data-stu-id="951ce-142">Available test and debug tools</span></span>  <br/> |<span data-ttu-id="951ce-143">调试使用 Windows VSS 的应用程序不需要任何特殊工具。</span><span class="sxs-lookup"><span data-stu-id="951ce-143">No special tools are required to debug applications that use the Windows VSS.</span></span>  <br/> |
   
## <a name="in-this-section"></a><span data-ttu-id="951ce-144">本节内容</span><span class="sxs-lookup"><span data-stu-id="951ce-144">In this section</span></span>

- [<span data-ttu-id="951ce-145">Exchange 2013 的备份和还原概念</span><span class="sxs-lookup"><span data-stu-id="951ce-145">Backup and restore concepts for Exchange 2013</span></span>](backup-and-restore-concepts-for-exchange-2013.md)
    
- [<span data-ttu-id="951ce-146">为 Exchange 2013 生成备份和还原应用程序</span><span class="sxs-lookup"><span data-stu-id="951ce-146">Build backup and restore applications for Exchange 2013</span></span>](build-backup-and-restore-applications-for-exchange-2013.md)
    
- [<span data-ttu-id="951ce-147">CChkSGFiles 类参考</span><span class="sxs-lookup"><span data-stu-id="951ce-147">CChkSGFiles class reference</span></span>](cchksgfiles-class-reference.md)
    
## <a name="see-also"></a><span data-ttu-id="951ce-148">另请参阅</span><span class="sxs-lookup"><span data-stu-id="951ce-148">See also</span></span>

- [<span data-ttu-id="951ce-149">卷影复制服务（Windows）</span><span class="sxs-lookup"><span data-stu-id="951ce-149">Volume Shadow Copy Service (Windows)</span></span>](https://msdn.microsoft.com/library/windows/desktop/bb968832%28v=vs.85%29.aspx)   
- [<span data-ttu-id="951ce-150">在 Exchange 中浏览 EWS 托管 API、EWS 和 Web 服务</span><span class="sxs-lookup"><span data-stu-id="951ce-150">Explore the EWS Managed API, EWS, and web services in Exchange</span></span>](../exchange-web-services/explore-the-ews-managed-api-ews-and-web-services-in-exchange.md)  
- [<span data-ttu-id="951ce-151">Exchange 命令行管理程序</span><span class="sxs-lookup"><span data-stu-id="951ce-151">Exchange Management Shell</span></span>](../management/exchange-management-shell.md)   
- [<span data-ttu-id="951ce-152">Exchange 中的传输代理</span><span class="sxs-lookup"><span data-stu-id="951ce-152">Transport agents in Exchange</span></span>](../transport-agents/transport-agents-in-exchange-2013.md) 
    

