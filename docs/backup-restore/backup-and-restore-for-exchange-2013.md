---
title: 备份和还原 exchange
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 329902d9-0ecb-4cfb-86dd-5ce863deff3f
description: 查找信息创建备份和还原 Exchange 2013 的应用程序。
ms.openlocfilehash: 9eceb3d512a73ad9cb07a01864fb8b029d5b5772
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/25/2018
ms.locfileid: "19752685"
---
# <a name="backup-and-restore-for-exchange"></a><span data-ttu-id="61cc1-103">备份和还原 exchange</span><span class="sxs-lookup"><span data-stu-id="61cc1-103">Backup and restore for Exchange</span></span>
  
<span data-ttu-id="61cc1-104">Exchange Server 2013 提供数据库可用性组 (Dag) 帮助保持存储的数据安全和可用，并减少需要自定义备份和还原应用程序。</span><span class="sxs-lookup"><span data-stu-id="61cc1-104">Exchange Server 2013 provides Database Availability Groups (DAGs), which help to keep stored data secure and available, and reduce the need for custom backup and restore applications.</span></span> <span data-ttu-id="61cc1-105">Dag 启用非现场数据冗余，以帮助确保您不会丢失数据。</span><span class="sxs-lookup"><span data-stu-id="61cc1-105">DAGs enable off-site data redundancy to help ensure that you won't lose data.</span></span> <span data-ttu-id="61cc1-106">但是，许多灾难恢复计划继续包括更传统的备份和还原方法和系统，包括自定义应用程序，与 DAG 的冗余。</span><span class="sxs-lookup"><span data-stu-id="61cc1-106">However, many disaster recovery plans continue to include more traditional backup and restore methods and systems, including custom applications, for redundancy with the DAG.</span></span> <span data-ttu-id="61cc1-107">为了帮助确保数据可用性和您的组织中的冗余，您可以创建自定义应用程序使用 Exchange Server 和 Windows Server 操作系统技术备份和还原 Exchange 数据。</span><span class="sxs-lookup"><span data-stu-id="61cc1-107">To help ensure data availability and redundancy in your organization, you can create custom applications that use Exchange Server and Windows Server operating system technologies to back up and restore your Exchange data.</span></span>

<span data-ttu-id="61cc1-108"><a name="bk_plugin"> </a></span><span class="sxs-lookup"><span data-stu-id="61cc1-108"></span></span>

## <a name="backup-technologies-in-exchange-2013"></a><span data-ttu-id="61cc1-109">Exchange 2013 中的备份技术</span><span class="sxs-lookup"><span data-stu-id="61cc1-109">Backup technologies in Exchange 2013</span></span>

<span data-ttu-id="61cc1-110">Exchange 2013 包括插件管理员可用于基于 VSS 备份 Exchange 数据的 Windows Server Backup。</span><span class="sxs-lookup"><span data-stu-id="61cc1-110">Exchange 2013 includes a plug-in for Windows Server Backup that administrators can use to make VSS-based backups of Exchange data.</span></span> <span data-ttu-id="61cc1-111">管理员还可以使用 Windows 服务器备份来备份和还原 Exchange 数据库。</span><span class="sxs-lookup"><span data-stu-id="61cc1-111">Administrators can also use Windows Server Backup to back up and restore Exchange databases.</span></span> <span data-ttu-id="61cc1-112">如果您所创建的备份和还原 Exchange 2013 的应用程序，您需要创建的 Exchange 感知应用程序支持的 Exchange 2013 VSS 编写器并使用 CHKSGFILES API 以验证该备份的一致性。</span><span class="sxs-lookup"><span data-stu-id="61cc1-112">If you are creating a backup and restore application for Exchange 2013, you need to create an Exchange-aware application that supports the VSS writer for Exchange 2013, and use the CHKSGFILES API to validate the consistency of that backup.</span></span> <span data-ttu-id="61cc1-113">有关详细信息，请参阅[使用 CHKSGFILES API 在 Exchange 2013 验证备份完整性](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="61cc1-113">For more information, see [Validate backup integrity by using the CHKSGFILES API in Exchange 2013](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md).</span></span>

<span data-ttu-id="61cc1-114"><a name="bk_vsswriter"> </a></span><span class="sxs-lookup"><span data-stu-id="61cc1-114"></span></span>

## <a name="vss-writer-in-exchange-2013"></a><span data-ttu-id="61cc1-115">Exchange 2013 中的 VSS 编写器</span><span class="sxs-lookup"><span data-stu-id="61cc1-115">VSS writer in Exchange 2013</span></span>

<span data-ttu-id="61cc1-116">Exchange 2013 到 Exchange Server 2010 和 Exchange Server 2007 中的 VSS 编写器体系结构引入了重大更改。</span><span class="sxs-lookup"><span data-stu-id="61cc1-116">Exchange 2013 introduces a significant change to the VSS writer architecture in Exchange Server 2010 and Exchange Server 2007.</span></span> <span data-ttu-id="61cc1-117">Exchange 2010 和 Exchange 2007 包括两个 VSS 编写器： 一个内部 Exchange 信息存储服务 (store.exe) 和一个内部 Exchange 复制服务 (msexchangerepl.exe)。</span><span class="sxs-lookup"><span data-stu-id="61cc1-117">Exchange 2010 and Exchange 2007 include two VSS writers: one inside the Exchange Information Store service (store.exe) and one inside the Exchange Replication service (msexchangerepl.exe).</span></span> <span data-ttu-id="61cc1-118">在 Exchange 2013 VSS 编写器功能位于 Exchange 复制服务。</span><span class="sxs-lookup"><span data-stu-id="61cc1-118">In Exchange 2013, the VSS writer functionality is located in the Exchange Replication service.</span></span> <span data-ttu-id="61cc1-119">备份和还原应用程序使用名为 Microsoft Exchange Writer，新 VSS 编写器备份主动和被动数据库副本，并还原备份数据库副本。</span><span class="sxs-lookup"><span data-stu-id="61cc1-119">Your backup and restore application uses the new VSS writer, called the Microsoft Exchange Writer, to back up active and passive database copies, and to restore backed up database copies.</span></span> <span data-ttu-id="61cc1-120">虽然在 Exchange 复制服务运行新 VSS 编写器，Exchange 信息存储服务必须运行编写器可顺序。</span><span class="sxs-lookup"><span data-stu-id="61cc1-120">Although the new VSS writer runs in the Exchange Replication service, the Exchange Information Store service must be running in order for the writer to be available.</span></span> <span data-ttu-id="61cc1-121">因此，这两种服务所需备份或还原 Exchange 数据库。</span><span class="sxs-lookup"><span data-stu-id="61cc1-121">As a result, both services are required to back up or restore Exchange databases.</span></span>
  
<span data-ttu-id="61cc1-122">虽然 Exchange 2013 中已更新 VSS 编写器体系结构，但未更改的基本功能。</span><span class="sxs-lookup"><span data-stu-id="61cc1-122">Although the VSS writer architecture was updated in Exchange 2013, the underlying functionality has not changed.</span></span> <span data-ttu-id="61cc1-123">如果您创建的 Exchange 2010 的备份和还原应用程序，您不需要对 Exchange 2013 的应用程序进行任何更改。</span><span class="sxs-lookup"><span data-stu-id="61cc1-123">If you created a backup and restore application for Exchange 2010, you do not need to make any changes to your application for Exchange 2013.</span></span> <span data-ttu-id="61cc1-124">请务必使用最新的文件，以确保兼容编译应用程序。</span><span class="sxs-lookup"><span data-stu-id="61cc1-124">Be sure to recompile your application with the latest files to ensure compatibility.</span></span> <span data-ttu-id="61cc1-125">备份和还原应用程序，为 Exchange 2007 或早期版本创建，您将需要重写代码以使用最新的 CHKSGFILES API。</span><span class="sxs-lookup"><span data-stu-id="61cc1-125">For backup and restore applications created for Exchange 2007 or earlier versions, you will need to rewrite your code to use the latest CHKSGFILES API.</span></span>
  
## <a name="what-you-need-to-know-about-vss-backup-and-restore"></a><span data-ttu-id="61cc1-126">您需要了解 VSS 备份和还原</span><span class="sxs-lookup"><span data-stu-id="61cc1-126">What you need to know about VSS backup and restore</span></span>

|<span data-ttu-id="61cc1-127">如果您想知道有关...</span><span class="sxs-lookup"><span data-stu-id="61cc1-127">If you're wondering about…</span></span>|<span data-ttu-id="61cc1-128">请参阅这个</span><span class="sxs-lookup"><span data-stu-id="61cc1-128">Read this</span></span>|
|:-----|:-----|
|<span data-ttu-id="61cc1-129">应用程序体系结构</span><span class="sxs-lookup"><span data-stu-id="61cc1-129">Application architectures</span></span>  <br/> |<span data-ttu-id="61cc1-130">使用 VSS 备份 Exchange 数据库通常组成执行备份的背景服务、 计划服务和 Windows 图形用户界面应用程序控制台的控件，并将配置备份和还原系统备份和还原应用程序。</span><span class="sxs-lookup"><span data-stu-id="61cc1-130">Backup and restore applications that use VSS to back up Exchange databases typically consist of a background service that performs the backup, a scheduling service, and a Windows GUI application console that controls and configures the backup and restore system.</span></span>  <br/> |
|<span data-ttu-id="61cc1-131">远程使用情况</span><span class="sxs-lookup"><span data-stu-id="61cc1-131">Remote usage</span></span>  <br/> |<span data-ttu-id="61cc1-132">使用 VSS 备份 Exchange 服务器的应用程序必须在其运行 Exchange 存储进程在 Windows Server 2008 计算机上运行。</span><span class="sxs-lookup"><span data-stu-id="61cc1-132">Applications that use VSS to back up Exchange servers must run on the Windows Server 2008 computer on which the Exchange store process is running.</span></span> <span data-ttu-id="61cc1-133">由于在大型存储系统的灵活性，承载存储卷的硬件可能不从物理上隔离是计算机的运行 Windows Server 2008 的一部分。</span><span class="sxs-lookup"><span data-stu-id="61cc1-133">Because of the flexibility in large storage systems, the hardware hosting the storage volumes might not physically be part of the computer running Windows Server 2008.</span></span>  <br/> |
|<span data-ttu-id="61cc1-134">语言和工具</span><span class="sxs-lookup"><span data-stu-id="61cc1-134">Languages and tools</span></span>  <br/> |<span data-ttu-id="61cc1-135">您可以使用任何 COM 兼容语言使用 vss。</span><span class="sxs-lookup"><span data-stu-id="61cc1-135">You can use any COM-compatible language to use VSS.</span></span> <span data-ttu-id="61cc1-136">在 c + + 编写的应用程序中最常使用它。</span><span class="sxs-lookup"><span data-stu-id="61cc1-136">It is most frequently used in applications written in C++.</span></span> <span data-ttu-id="61cc1-137">由于您必须采取 Exchange 存储脱机创建卷影副本，备份应用程序将是通常时效性，在大多数情况下使使用 Visual Basic 或 VBScript 不切实际类似的语言。</span><span class="sxs-lookup"><span data-stu-id="61cc1-137">Because you have to take the Exchange store offline to create shadow copies, backup applications are typically time-sensitive, which in most cases makes using languages like Visual Basic or VBScript impractical.</span></span>  <br/> |
|<span data-ttu-id="61cc1-138">托管实现</span><span class="sxs-lookup"><span data-stu-id="61cc1-138">Managed implementation</span></span>  <br/> |<span data-ttu-id="61cc1-139">您可以通过 COM 互操作程序集的托管的代码环境中使用 VSS Api。</span><span class="sxs-lookup"><span data-stu-id="61cc1-139">You can use the VSS APIs in a managed code environment via a COM Interop Assembly.</span></span>  <br/> |
|<span data-ttu-id="61cc1-140">可脚本化</span><span class="sxs-lookup"><span data-stu-id="61cc1-140">Scriptable</span></span>  <br/> |<span data-ttu-id="61cc1-141">是，但不是建议这样做。</span><span class="sxs-lookup"><span data-stu-id="61cc1-141">Yes, but not recommended.</span></span>  <br/> |
|<span data-ttu-id="61cc1-142">可用测试和调试工具</span><span class="sxs-lookup"><span data-stu-id="61cc1-142">Available test and debug tools</span></span>  <br/> |<span data-ttu-id="61cc1-143">没有特殊工具所需调试应用程序使用 Windows vss。</span><span class="sxs-lookup"><span data-stu-id="61cc1-143">No special tools are required to debug applications that use the Windows VSS.</span></span>  <br/> |
   
## <a name="in-this-section"></a><span data-ttu-id="61cc1-144">本节内容</span><span class="sxs-lookup"><span data-stu-id="61cc1-144">In this section</span></span>

- [<span data-ttu-id="61cc1-145">Exchange 2013 的备份和还原概念</span><span class="sxs-lookup"><span data-stu-id="61cc1-145">Backup and restore concepts for Exchange 2013</span></span>](backup-and-restore-concepts-for-exchange-2013.md)
    
- [<span data-ttu-id="61cc1-146">构建备份和还原 Exchange 2013 的应用程序</span><span class="sxs-lookup"><span data-stu-id="61cc1-146">Build backup and restore applications for Exchange 2013</span></span>](build-backup-and-restore-applications-for-exchange-2013.md)
    
- [<span data-ttu-id="61cc1-147">CChkSGFiles 类参考 （英文）</span><span class="sxs-lookup"><span data-stu-id="61cc1-147">CChkSGFiles class reference</span></span>](cchksgfiles-class-reference.md)
    
## <a name="see-also"></a><span data-ttu-id="61cc1-148">另请参阅</span><span class="sxs-lookup"><span data-stu-id="61cc1-148">See also</span></span>

- [<span data-ttu-id="61cc1-149">卷影复制服务 (Windows)</span><span class="sxs-lookup"><span data-stu-id="61cc1-149">Volume Shadow Copy Service (Windows)</span></span>](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968832%28v=vs.85%29.aspx)   
- [<span data-ttu-id="61cc1-150">在 Exchange 中浏览 EWS 托管 API、EWS 和 Web 服务</span><span class="sxs-lookup"><span data-stu-id="61cc1-150">Explore the EWS Managed API, EWS, and web services in Exchange</span></span>](../exchange-web-services/explore-the-ews-managed-api-ews-and-web-services-in-exchange.md)  
- [<span data-ttu-id="61cc1-151">Exchange 命令行管理程序</span><span class="sxs-lookup"><span data-stu-id="61cc1-151">Exchange Management Shell</span></span>](../management/exchange-management-shell.md)   
- [<span data-ttu-id="61cc1-152">在 Exchange 传输代理</span><span class="sxs-lookup"><span data-stu-id="61cc1-152">Transport agents in Exchange</span></span>](../transport-agents/transport-agents-in-exchange-2013.md) 
    

