---
title: 通知订阅、 邮箱事件和 Exchange 中的 EWS
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: 76136f28-0dad-4ecc-9dd7-a45a1861e4b0
description: 了解有关通知订阅和 EWS 中的邮箱事件在 Exchange。
ms.openlocfilehash: 4f466c6cc01af410807948a9fec40c2af399c3e3
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/25/2018
ms.locfileid: "19753007"
---
# <a name="notification-subscriptions-mailbox-events-and-ews-in-exchange"></a><span data-ttu-id="45976-103">通知订阅、 邮箱事件和 Exchange 中的 EWS</span><span class="sxs-lookup"><span data-stu-id="45976-103">Notification subscriptions, mailbox events, and EWS in Exchange</span></span>

<span data-ttu-id="45976-104">了解有关通知订阅和 EWS 中的邮箱事件在 Exchange。</span><span class="sxs-lookup"><span data-stu-id="45976-104">Find out about notification subscriptions and mailbox event in EWS in Exchange.</span></span>
  
<span data-ttu-id="45976-105">您可以使用 EWS 托管 API 和 Exchange Web Services (EWS) 订阅事件发生在邮箱，或在一个或多个邮箱中的一个文件夹中时收到通知。</span><span class="sxs-lookup"><span data-stu-id="45976-105">You can use both the EWS Managed API and Exchange Web Services (EWS) to subscribe to receive notifications when events occur in a mailbox, or in one or more of the folders in a mailbox.</span></span> <span data-ttu-id="45976-106">有三个订阅类型： 流式传输通知，拉通知和推送通知。</span><span class="sxs-lookup"><span data-stu-id="45976-106">Three subscription types are available: streaming notifications, pull notifications, and push notifications.</span></span> <span data-ttu-id="45976-107">每个订阅类型使用不同的技术来接收或检索通知。</span><span class="sxs-lookup"><span data-stu-id="45976-107">Each of these subscription types uses different techniques to receive or retrieve the notifications.</span></span>
  
## <a name="getting-notifications---what-are-my-options"></a><span data-ttu-id="45976-108">获取通知-我的选项什么？</span><span class="sxs-lookup"><span data-stu-id="45976-108">Getting notifications - what are my options?</span></span>
<span data-ttu-id="45976-109"><a name="bk_notiftypes"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-109"></span></span>

<span data-ttu-id="45976-110">EWS 包括三个独立工作向客户端的服务器上更改通知的订阅类型。</span><span class="sxs-lookup"><span data-stu-id="45976-110">EWS includes three subscription types that work independently to notify the client of changes on the server.</span></span> <span data-ttu-id="45976-111">预订类型选择，您将有权访问所有相同通知事件最终-无论它是只需如何获取它们。</span><span class="sxs-lookup"><span data-stu-id="45976-111">No matter which subscription type you choose, you'll have access to all the same notification events in the end - it's just a matter of how you get them.</span></span>
  
<span data-ttu-id="45976-112">**表 1。预订类型**</span><span class="sxs-lookup"><span data-stu-id="45976-112">**Table 1. Subscription types**</span></span>

|<span data-ttu-id="45976-113">**选项**</span><span class="sxs-lookup"><span data-stu-id="45976-113">**Option**</span></span>|<span data-ttu-id="45976-114">**说明**</span><span class="sxs-lookup"><span data-stu-id="45976-114">**Description**</span></span>|<span data-ttu-id="45976-115">**适合它为我？**</span><span class="sxs-lookup"><span data-stu-id="45976-115">**Is it right for me?**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="45976-116">流式处理通知</span><span class="sxs-lookup"><span data-stu-id="45976-116">Streaming notifications</span></span>  <br/> |<span data-ttu-id="45976-117">由服务器通过指定时间内保持打开状态的连接发送的通知。</span><span class="sxs-lookup"><span data-stu-id="45976-117">Notifications that are sent by the server through a connection that remains open for a specified period of time.</span></span>  <br/> |<span data-ttu-id="45976-118">流式通知通常建议对于大多数应用程序中。</span><span class="sxs-lookup"><span data-stu-id="45976-118">Streaming notifications are generally recommended for most applications.</span></span> <span data-ttu-id="45976-119">它们类似于拉和推送通知，并提供这两个领域的优势。</span><span class="sxs-lookup"><span data-stu-id="45976-119">They're similar to pull and push notifications, and offer the best of both worlds.</span></span> <span data-ttu-id="45976-120">在建立通知订阅之后，连接将保持打开的最多 30 分钟，以便向客户端的推送通知的服务器。</span><span class="sxs-lookup"><span data-stu-id="45976-120">After you establish your notification subscription, the connection remains open for up to 30 minutes to allow the server to push notifications back to the client.</span></span> <span data-ttu-id="45976-121">像即可与请求订阅，并且您无需创建 web 侦听器应用程序强制订阅像请求更新，无需。</span><span class="sxs-lookup"><span data-stu-id="45976-121">No need to request updates, like you would with a pull subscription, and you don't have to create a web service listener application like you would with a push subscription.</span></span>  <br/> |
|<span data-ttu-id="45976-122">提取通知</span><span class="sxs-lookup"><span data-stu-id="45976-122">Pull notifications</span></span>  <br/> |<span data-ttu-id="45976-123">所请求 （或中拉取） 由客户端的通知。</span><span class="sxs-lookup"><span data-stu-id="45976-123">Notifications that are requested (or pulled) by the client.</span></span>  <br/> |<span data-ttu-id="45976-124">拉通知是通常最适合松散耦合客户端，其中客户端不可靠地连接到网络。</span><span class="sxs-lookup"><span data-stu-id="45976-124">Pull notifications are generally most appropriate for loosely coupled clients, where the client is not reliably connected to the network.</span></span> <span data-ttu-id="45976-125">拉通知可以创建客户端和服务器之间的多余流量，因为客户端将频繁请求发送到服务器以检索通知，并且不是所有请求所都产生的检索的通知。</span><span class="sxs-lookup"><span data-stu-id="45976-125">Pull notifications can create excess traffic between the client and the server because the client is sending frequent requests to the server to retrieve notifications, and not all requests result in notifications retrieved.</span></span>  <br/> |
|<span data-ttu-id="45976-126">推送通知</span><span class="sxs-lookup"><span data-stu-id="45976-126">Push notifications</span></span>  <br/> |<span data-ttu-id="45976-127">通知要发送 （或推送） 客户端到服务器的 web 服务通过回调地址。</span><span class="sxs-lookup"><span data-stu-id="45976-127">Notifications that are sent (or pushed) by the server to a client-side web service via a callback address.</span></span>  <br/> |<span data-ttu-id="45976-128">通常，推送通知提供比拉通知的较小通知延迟，并且适合紧密耦合的客户端到服务器具有可靠地访问和客户端是 IP 寻址。</span><span class="sxs-lookup"><span data-stu-id="45976-128">Generally, push notifications provide for smaller notification latency than pull notifications and are suited for tightly coupled clients to which the server has reliable access and the client is IP addressable.</span></span> <span data-ttu-id="45976-129">但是，推送通知已弃用不以来的流通知在 Exchange 2010 一起工作。</span><span class="sxs-lookup"><span data-stu-id="45976-129">However, push notifications have fallen out of favor since the advent of streaming notifications in Exchange 2010.</span></span> <span data-ttu-id="45976-130">如果可能，我们建议您使用流式通知，而不是循序的推送通知。</span><span class="sxs-lookup"><span data-stu-id="45976-130">If possible, we recommend that you use streaming notifications instead of push notifications going forward.</span></span> <span data-ttu-id="45976-131">推送通知要求您编写侦听器应用程序，它是其中推送通知到。</span><span class="sxs-lookup"><span data-stu-id="45976-131">Push notifications require that you write a listener application, which is where the notifications are pushed to.</span></span> <span data-ttu-id="45976-132">它可以减少网络通信，但它需要单独的应用程序添加开销，这会通过拉通知有少许收益。</span><span class="sxs-lookup"><span data-stu-id="45976-132">This has a slight benefit over pull notifications in that it reduces wire traffic, but it adds overhead by requiring a separate application.</span></span>  <br/> |
   
## <a name="what-ews-events-can-i-subscribe-to"></a><span data-ttu-id="45976-133">可以订阅的 EWS 中的哪些事件？</span><span class="sxs-lookup"><span data-stu-id="45976-133">What EWS events can I subscribe to?</span></span>
<span data-ttu-id="45976-134"><a name="bk_eventtypes"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-134"></span></span>

<span data-ttu-id="45976-135">由 EWS 托管 API 的[EventType](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx)枚举或 EWS 的[EventType](http://msdn.microsoft.com/library/04b70f9e-c226-4130-958e-0db0275cf58b%28Office.15%29.aspx)元素定义的客户端订阅的 EWS 事件的类型。</span><span class="sxs-lookup"><span data-stu-id="45976-135">The types of EWS events that clients subscribe to are defined by the [EventType](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx) enumeration for the EWS Managed API or the [EventType](http://msdn.microsoft.com/library/04b70f9e-c226-4130-958e-0db0275cf58b%28Office.15%29.aspx) element for EWS.</span></span> <span data-ttu-id="45976-136">以下 EWS 事件供订阅：</span><span class="sxs-lookup"><span data-stu-id="45976-136">The following EWS events are available for subscription:</span></span> 
  
- <span data-ttu-id="45976-137">NewMail — 新消息到达收件箱中。</span><span class="sxs-lookup"><span data-stu-id="45976-137">NewMail — A new message arrived in the Inbox.</span></span>
    
- <span data-ttu-id="45976-138">删除 — 一条消息，很难从收件箱中删除。</span><span class="sxs-lookup"><span data-stu-id="45976-138">Deleted — A message was hard deleted from the Inbox.</span></span> <span data-ttu-id="45976-139">若要了解有关已删除的邮件通知的详细信息，请参阅[使用 EWS 在 Exchange 中删除项目](deleting-items-by-using-ews-in-exchange.md)并[在 Exchange 拉 EWS 删除相关邮箱事件通知](pull-notifications-for-ews-deletion-related-mailbox-events-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="45976-139">To learn more about deleted item notifications, see [Deleting items by using EWS in Exchange](deleting-items-by-using-ews-in-exchange.md) and [Pull notifications for EWS deletion-related mailbox events in Exchange](pull-notifications-for-ews-deletion-related-mailbox-events-in-exchange.md).</span></span>
    
- <span data-ttu-id="45976-140">修改 — 项目或文件夹已更改。</span><span class="sxs-lookup"><span data-stu-id="45976-140">Modified — An item or folder was changed.</span></span>
    
- <span data-ttu-id="45976-141">移动 — 项目或文件夹已移动。</span><span class="sxs-lookup"><span data-stu-id="45976-141">Moved — An item or folder was moved.</span></span> 
    
- <span data-ttu-id="45976-142">复制 — 项目或文件夹已复制。</span><span class="sxs-lookup"><span data-stu-id="45976-142">Copied — An item or folder was copied.</span></span>
    
- <span data-ttu-id="45976-143">创建 — 项目或文件夹的创建。</span><span class="sxs-lookup"><span data-stu-id="45976-143">Created — An item or folder was created.</span></span> 
    
- <span data-ttu-id="45976-144">FreeBusyChanged — 已更改用户的忙/闲信息。</span><span class="sxs-lookup"><span data-stu-id="45976-144">FreeBusyChanged — A user's free busy information has been changed.</span></span>
    
<span data-ttu-id="45976-145">另一种 EWS 事件类型，状态事件中，定义[EventType](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx)元素，但不订阅此事件。</span><span class="sxs-lookup"><span data-stu-id="45976-145">Another EWS event type, the Status event, is defined by the [EventType](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx) element, but you don't subscribe to this event.</span></span> <span data-ttu-id="45976-146">相反，它是发送服务器检查客户端的流式传输和推送通知的状态。</span><span class="sxs-lookup"><span data-stu-id="45976-146">Instead, it's sent by the server to check the status of the client for streaming and push notifications only.</span></span> <span data-ttu-id="45976-147">客户端需要响应这个事件需求或客户端将超时时间。</span><span class="sxs-lookup"><span data-stu-id="45976-147">The client needs to respond to this event needs or the client will time out.</span></span> 
  
<span data-ttu-id="45976-148">通常的单个用户操作导致的多个通知创建。</span><span class="sxs-lookup"><span data-stu-id="45976-148">A single user action often results in the creation of multiple notifications.</span></span> <span data-ttu-id="45976-149">为了说明这一点下, 图显示了一些常见方案和为每个创建的通知。</span><span class="sxs-lookup"><span data-stu-id="45976-149">To illustrate this, the following figure shows some common scenarios and the notifications created for each one.</span></span> <span data-ttu-id="45976-150">客户端设置会影响收到，通知，因此这不是所有配置选项和生成通知的详尽列表。</span><span class="sxs-lookup"><span data-stu-id="45976-150">Client settings have an impact on the notifications received, so this is not an exhaustive list of all the configuration options and resulting notifications.</span></span>
  
<span data-ttu-id="45976-151">**图 1。返回的通知订阅的事件类型**</span><span class="sxs-lookup"><span data-stu-id="45976-151">**Figure 1. Event types returned by notification subscriptions**</span></span>

![此表格显示在常见用户情境下发送的通知，例如收到新的电子邮件、创建新的文件夹、移动某个文件夹等。](media/Exchange2013_Notifications_Events.png)
  
<span data-ttu-id="45976-153">图 1 简化了通知过程。</span><span class="sxs-lookup"><span data-stu-id="45976-153">Figure 1 simplifies the notification process.</span></span> <span data-ttu-id="45976-154">实际上，可以为单个用户操作创建多个通知 （甚至相同类型的多个通知）。</span><span class="sxs-lookup"><span data-stu-id="45976-154">In reality, multiple notifications (even multiple notifications of the same type) can be created for a single user action.</span></span> <span data-ttu-id="45976-155">例如，对于文件夹移动操作，三个文件夹创建事件： 一个用于要修改的文件夹、 旧的父文件夹，和新的父文件夹。</span><span class="sxs-lookup"><span data-stu-id="45976-155">For example, in the case of a folder move operation, three folder events are created: one for the folder being modified, one for the old parent folder, and one for the new parent folder.</span></span> <span data-ttu-id="45976-156">因为许多事件可以为单个操作而触发，我们建议您[构建一个几秒钟到同步操作的等待时间](mailbox-synchronization-and-ews-in-exchange.md#bk_bestpractices)，以便仅同步操作完成后，而不是通过操作的一部分。</span><span class="sxs-lookup"><span data-stu-id="45976-156">Because numerous events can be fired for a single operation, we recommend that you [build a wait time of a few seconds into your synchronization operations](mailbox-synchronization-and-ews-in-exchange.md#bk_bestpractices), so that you only synchronize when the action is complete, instead of partway through the operation.</span></span>
  
<span data-ttu-id="45976-157">也很重要认识到，每个用户选择的配置设置会影响创建的通知。</span><span class="sxs-lookup"><span data-stu-id="45976-157">It's also important to realize that the configuration settings that each user chooses will affect which notifications are created.</span></span> <span data-ttu-id="45976-158">例如，某些用户的忙/闲数据将被自动更新和时收到新会议请求，甚至他们已经阅读该项目之前创建的 FreeBusyChanged 事件。</span><span class="sxs-lookup"><span data-stu-id="45976-158">For example, some users' free busy data is updated automatically and the FreeBusyChanged event is created when a new meeting request is received, even before they've read the item.</span></span> <span data-ttu-id="45976-159">和其他用户的忙/闲数据不更新接受会议之后，直到创建不 FreeBusyChanged 事件。</span><span class="sxs-lookup"><span data-stu-id="45976-159">For other users, free busy data isn't updated and the FreeBusyChanged event isn't created until after the meeting has been accepted.</span></span> <span data-ttu-id="45976-160">这些设置会对由服务器创建通知相当大的影响。</span><span class="sxs-lookup"><span data-stu-id="45976-160">These settings can have a considerable impact on the notifications created by the server.</span></span>
  
## <a name="how-do-ews-notifications-work"></a><span data-ttu-id="45976-161">EWS 通知的工作方式？</span><span class="sxs-lookup"><span data-stu-id="45976-161">How do EWS notifications work?</span></span>
<span data-ttu-id="45976-162"><a name="bk_howwork"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-162"></span></span>

<span data-ttu-id="45976-163">EWS 通知订阅逐个处理。</span><span class="sxs-lookup"><span data-stu-id="45976-163">EWS notifications are handled on a subscription basis.</span></span> <span data-ttu-id="45976-164">通常没有有一个订阅每个邮箱，并且内的邮箱订阅您可以订阅的部分或所有文件夹。</span><span class="sxs-lookup"><span data-stu-id="45976-164">Typically there's one subscription per mailbox, and within the mailbox subscription you can subscribe to some or all folders.</span></span> <span data-ttu-id="45976-165">您决定哪种类型的通知订阅 （流视频、 请求或推送） 和哪种类型的事件您想要接收 （NewMail、 创建、 删除、 修改时间等），然后创建订阅。</span><span class="sxs-lookup"><span data-stu-id="45976-165">You decide what kind of notification to subscribe to (streaming, pull, or push) and what kind of events you'd like to receive (NewMail, Created, Deleted, Modified, etc.), and then you create a subscription.</span></span> <span data-ttu-id="45976-166">EWS 事件是然后异步从邮箱服务器发送到客户端。</span><span class="sxs-lookup"><span data-stu-id="45976-166">The EWS events are then sent asynchronously from the mailbox server to the client.</span></span> <span data-ttu-id="45976-167">(历史记录课： 事件都是在 Exchange 2007-同步和事件都存储在 Exchange 2010 客户端访问服务器上，但没有更多 ！)。</span><span class="sxs-lookup"><span data-stu-id="45976-167">(History lesson: events are synchronous in Exchange 2007 - and events are stored on the Client Access server in Exchange 2010, but no more!).</span></span>
  
<span data-ttu-id="45976-168">根据已的订阅的类型，其中通知发送到客户端的方式会有所不同。</span><span class="sxs-lookup"><span data-stu-id="45976-168">Depending on the type of subscription you have, the ways in which the notifications are sent to the client vary.</span></span> <span data-ttu-id="45976-169">本节介绍每种类型的订阅中更多详细信息的方式。</span><span class="sxs-lookup"><span data-stu-id="45976-169">This section describes how each type of subscription works in more detail.</span></span>
  
### <a name="ews-streaming-notifications"></a><span data-ttu-id="45976-170">EWS 流式通知</span><span class="sxs-lookup"><span data-stu-id="45976-170">EWS streaming notifications</span></span>
<span data-ttu-id="45976-171"><a name="bk_streamnotif"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-171"></span></span>

<span data-ttu-id="45976-172">流式通知依赖悬挂 get 请求的服务器上的流式订阅连接保持打开状态，以便连接处于活动状态时出现的任何事件流式传输到客户端立即。</span><span class="sxs-lookup"><span data-stu-id="45976-172">Streaming notifications rely on a hanging get request on the server to keep a streaming subscription connection open, so that any events that occur while the connection is active are streamed to the client immediately.</span></span> <span data-ttu-id="45976-173">可以通过单个连接，并连接保持打开，直到间隔过期，或者最多 30 分钟的课程发送多个通知。</span><span class="sxs-lookup"><span data-stu-id="45976-173">Multiple notifications can be sent over the course of a single connection, and the connection stays open until the interval expires, or for a maximum of 30 minutes.</span></span> <span data-ttu-id="45976-174">客户端连接过期后，发送溢出再次 get 请求。</span><span class="sxs-lookup"><span data-stu-id="45976-174">After the connection expires, the client sends the hanging get request again.</span></span> <span data-ttu-id="45976-175">图 2 显示了如何工作流订阅和流式处理通知。</span><span class="sxs-lookup"><span data-stu-id="45976-175">Figure 2 shows how streaming subscriptions and streaming notifications work.</span></span>
  
<span data-ttu-id="45976-176">**图 2。流式处理通知概述 （英文）**</span><span class="sxs-lookup"><span data-stu-id="45976-176">**Figure 2. Streaming notification overview**</span></span>

![此插图显示流通知的工作原理。设置流通知的步骤：1. 订阅；2. 打开连接；3. 等待事件；4. 接收事件，重复 3 和 4；5. 关闭或保留连接；6. 取消订阅或超时。](media/Exchange2013_Notifications_StreamSub.png)
  
<span data-ttu-id="45976-185">有关创建流式通知的信息，请参阅[有关使用 EWS 在 Exchange 邮箱事件的流通知](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="45976-185">For information about creating streaming notifications, see [Stream notifications about mailbox events by using EWS in Exchange](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span>
  
### <a name="ews-pull-notifications"></a><span data-ttu-id="45976-186">EWS 拉通知</span><span class="sxs-lookup"><span data-stu-id="45976-186">EWS pull notifications</span></span>
<span data-ttu-id="45976-187"><a name="bk_pullnotif"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-187"></span></span>

<span data-ttu-id="45976-188">拉通知依赖于客户端上，客户端管理间隔要求通知。</span><span class="sxs-lookup"><span data-stu-id="45976-188">Pull notifications rely on the client asking for the notifications on an interval that the client manages.</span></span> <span data-ttu-id="45976-189">这会导致 GetEvents 响应与任何通知。</span><span class="sxs-lookup"><span data-stu-id="45976-189">This can result in GetEvents responses with no notifications.</span></span> <span data-ttu-id="45976-190">图 3 显示请求订阅和拉通知的工作方式。</span><span class="sxs-lookup"><span data-stu-id="45976-190">Figure 3 shows how pull subscriptions and pull notifications work.</span></span>
  
<span data-ttu-id="45976-191">**图 3。提取通知概述 （英文）**</span><span class="sxs-lookup"><span data-stu-id="45976-191">**Figure 3. Pull notification overview**</span></span>

![此插图显示拉取通知的工作原理。设置拉取通知的步骤：1. 订阅；2. 发送 GetEvents；3. 接收答复，重复 2 和 3；4. 关闭或保留连接；5. 取消订阅或超时。](media/Exchange2013_Notifications_PullSub.png)
  
<span data-ttu-id="45976-199">有关创建拉通知的信息，请参阅[有关使用 EWS 在 Exchange 邮箱事件出现通知](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="45976-199">For information about creating pull notifications, see [Pull notifications about mailbox events by using EWS in Exchange](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span>
  
### <a name="ews-push-notifications"></a><span data-ttu-id="45976-200">EWS 推送通知</span><span class="sxs-lookup"><span data-stu-id="45976-200">EWS push notifications</span></span>
<span data-ttu-id="45976-201"><a name="bk_pushnotif"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-201"></span></span>

<span data-ttu-id="45976-202">推送通知依赖于服务器返回到客户端推送通知。</span><span class="sxs-lookup"><span data-stu-id="45976-202">Push notifications rely on the server pushing notifications back to the client.</span></span> <span data-ttu-id="45976-203">没有通知时仅流量。</span><span class="sxs-lookup"><span data-stu-id="45976-203">There's only traffic if there's a notification.</span></span> <span data-ttu-id="45976-204">图 4 显示强制订阅和推送通知的工作方式。</span><span class="sxs-lookup"><span data-stu-id="45976-204">Figure 4 shows how push subscriptions and push notifications work.</span></span>
  
<span data-ttu-id="45976-205">**图 4。推送通知概述 （英文)**</span><span class="sxs-lookup"><span data-stu-id="45976-205">**Figure 4. Push notification overview**</span></span>

![此插图显示推送通知的工作原理。设置推送通知的步骤：1. 创建侦听器；2. 订阅；3. 等待事件；4. 接收事件；5. 发送“确定”答复，重复 3、4、和 5；6. 取消订阅或超时。](media/Exchange2013_Notifications_PushSub.png)
  
<span data-ttu-id="45976-214">如果您使用[与 Exchange 2010 的推送通知](http://msdn.microsoft.com/library/db1f8523-fa44-483f-bdb6-ab5939b52eee%28Office.15%29.aspx)，请考虑升级应用程序[使用流式通知](http://code.msdn.microsoft.com/exchange/Exchange-2013-Set-push-82738cc5)，以便您无需单独的应用程序以接收事件。</span><span class="sxs-lookup"><span data-stu-id="45976-214">If you are using [push notifications with Exchange 2010](http://msdn.microsoft.com/library/db1f8523-fa44-483f-bdb6-ab5939b52eee%28Office.15%29.aspx), consider upgrading your application to [use streaming notifications](http://code.msdn.microsoft.com/exchange/Exchange-2013-Set-push-82738cc5), so that you don't need a separate application to receive the events.</span></span>
  
## <a name="how-do-i-subscribe-to-notifications"></a><span data-ttu-id="45976-215">如何订阅通知？</span><span class="sxs-lookup"><span data-stu-id="45976-215">How do I subscribe to notifications?</span></span>
<span data-ttu-id="45976-216"><a name="bk_notifoperations"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-216"></span></span>

<span data-ttu-id="45976-217">根据您想要创建的订阅的类型，您有多种选项可供选择的订阅通知。</span><span class="sxs-lookup"><span data-stu-id="45976-217">Depending on the type of subscription you'd like to create, you have a number of options to choose from for subscribing to notifications.</span></span>
  
<span data-ttu-id="45976-218">**表 2。操作和用于订阅通知的方法**</span><span class="sxs-lookup"><span data-stu-id="45976-218">**Table 2. Operations and methods for subscribing to notifications**</span></span>

|<span data-ttu-id="45976-219">**预订类型**</span><span class="sxs-lookup"><span data-stu-id="45976-219">**Subscription type**</span></span>|<span data-ttu-id="45976-220">**EWS 操作**</span><span class="sxs-lookup"><span data-stu-id="45976-220">**EWS operation**</span></span>|<span data-ttu-id="45976-221">**EWS 托管 API 方法**</span><span class="sxs-lookup"><span data-stu-id="45976-221">**EWS Managed API methods**</span></span>|<span data-ttu-id="45976-222">**它的用途**</span><span class="sxs-lookup"><span data-stu-id="45976-222">**What it does**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="45976-223">流式处理</span><span class="sxs-lookup"><span data-stu-id="45976-223">Streaming</span></span>  <br/> |[<span data-ttu-id="45976-224">订阅操作</span><span class="sxs-lookup"><span data-stu-id="45976-224">Subscribe operation</span></span>](http://msdn.microsoft.com/library/f17c3d08-c79e-41f1-ba31-6e41e7aafd87%28Office.15%29.aspx) <br/> |[<span data-ttu-id="45976-225">ExchangeService.BeginSubscribeToStreamingNotifications 方法</span><span class="sxs-lookup"><span data-stu-id="45976-225">ExchangeService.BeginSubscribeToStreamingNotifications method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetostreamingnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-226">ExchangeService.BeginSubscribeToStreamingNotificationsOnAllFolders 方法</span><span class="sxs-lookup"><span data-stu-id="45976-226">ExchangeService.BeginSubscribeToStreamingNotificationsOnAllFolders method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetostreamingnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-227">ExchangeService.SubscribeToStreamingNotificationsOnAllFolders 方法</span><span class="sxs-lookup"><span data-stu-id="45976-227">ExchangeService.SubscribeToStreamingNotificationsOnAllFolders method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.subscribetostreamingnotifications%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="45976-228">创建订阅通知流式处理的请求。</span><span class="sxs-lookup"><span data-stu-id="45976-228">Creates a request to subscribe to streaming notifications.</span></span>  <br/> |
|<span data-ttu-id="45976-229">提取</span><span class="sxs-lookup"><span data-stu-id="45976-229">Pull</span></span>  <br/> |[<span data-ttu-id="45976-230">订阅操作</span><span class="sxs-lookup"><span data-stu-id="45976-230">Subscribe operation</span></span>](http://msdn.microsoft.com/library/f17c3d08-c79e-41f1-ba31-6e41e7aafd87%28Office.15%29.aspx) <br/> |[<span data-ttu-id="45976-231">ExchangeService.BeginSubscribeToPullNotifications 方法</span><span class="sxs-lookup"><span data-stu-id="45976-231">ExchangeService.BeginSubscribeToPullNotifications method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopullnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-232">ExchangeService.BeginSubscribeToPullNotificationsOnAllFolders 方法</span><span class="sxs-lookup"><span data-stu-id="45976-232">ExchangeService.BeginSubscribeToPullNotificationsOnAllFolders method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopullnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-233">ExchangeService.SubscribeToPullNotifications 方法</span><span class="sxs-lookup"><span data-stu-id="45976-233">ExchangeService.SubscribeToPullNotifications method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-234">ExchangeService.SubscribeToPullNotificationsOnAllFolders 方法</span><span class="sxs-lookup"><span data-stu-id="45976-234">ExchangeService.SubscribeToPullNotificationsOnAllFolders method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="45976-235">创建订阅拉通知的请求。</span><span class="sxs-lookup"><span data-stu-id="45976-235">Creates a request to subscribe to pull notifications.</span></span>  <br/> |
|<span data-ttu-id="45976-236">推送</span><span class="sxs-lookup"><span data-stu-id="45976-236">Push</span></span>  <br/> |[<span data-ttu-id="45976-237">订阅操作</span><span class="sxs-lookup"><span data-stu-id="45976-237">Subscribe operation</span></span>](http://msdn.microsoft.com/library/f17c3d08-c79e-41f1-ba31-6e41e7aafd87%28Office.15%29.aspx) <br/> |[<span data-ttu-id="45976-238">ExchangeService.BeginSubscribeToPushNotifications 重载方法</span><span class="sxs-lookup"><span data-stu-id="45976-238">ExchangeService.BeginSubscribeToPushNotifications overloaded method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopushnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-239">ExchangeService.BeginSubscribeToPushNotificationsOnAllFolders 重载方法</span><span class="sxs-lookup"><span data-stu-id="45976-239">ExchangeService.BeginSubscribeToPushNotificationsOnAllFolders overload method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopushnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-240">ExchangeService.SubscribeToPushNotifications 重载方法</span><span class="sxs-lookup"><span data-stu-id="45976-240">ExchangeService.SubscribeToPushNotifications overloaded method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-241">ExchangeService.SubscribeToPushNotificationsOnAllFolders 重载方法</span><span class="sxs-lookup"><span data-stu-id="45976-241">ExchangeService.SubscribeToPushNotificationsOnAllFolders overloaded method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="45976-242">创建订阅推送通知的请求。</span><span class="sxs-lookup"><span data-stu-id="45976-242">Creates a request to subscribe to push notifications.</span></span>  <br/> |
   
## <a name="how-do-i-get-ews-events"></a><span data-ttu-id="45976-243">如何获取 EWS 事件？</span><span class="sxs-lookup"><span data-stu-id="45976-243">How do I get EWS events?</span></span>
<span data-ttu-id="45976-244"><a name="bk_getevents"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-244"></span></span>

<span data-ttu-id="45976-245">创建订阅后，在其中的实际事件发送到客户端的方式取决于预订类型。</span><span class="sxs-lookup"><span data-stu-id="45976-245">After the subscription is created, the way in which the actual events are sent to the client depends on the subscription type.</span></span> 
  
<span data-ttu-id="45976-246">进行流式处理通知，必须先创建传输的订阅连接，然后订阅添加到该连接。</span><span class="sxs-lookup"><span data-stu-id="45976-246">For streaming notifications, a streaming subscription connection must be created, and then the subscription is added to the connection.</span></span> <span data-ttu-id="45976-247">您可以阅读更多有关此过程中[使用 EWS 在 Exchange 邮箱事件有关的流通知](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="45976-247">You can read more about this process in [Stream notifications about mailbox events by using EWS in Exchange](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span> 
  
<span data-ttu-id="45976-248">出现通知订阅对象已初始化时创建订阅，因此只需调用**GetEvent**方法或要从服务器中检索事件的操作。</span><span class="sxs-lookup"><span data-stu-id="45976-248">For pull notifications, the subscription object was initialized when the subscription was created, so you just have to call the **GetEvent** method or operation to retrieve the events from the server.</span></span> <span data-ttu-id="45976-249">您可以阅读更多有关此中[提取有关使用 EWS 在 Exchange 邮箱事件的通知](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="45976-249">You can read more about this in [Pull notifications about mailbox events by using EWS in Exchange](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span> 
  
<span data-ttu-id="45976-250">下表列出的操作和检索事件所需的类。</span><span class="sxs-lookup"><span data-stu-id="45976-250">The following table lists the operations and classes required to retrieve events.</span></span> 
  
<span data-ttu-id="45976-251">**表 3。元素和类可用于创建连接和获取事件**</span><span class="sxs-lookup"><span data-stu-id="45976-251">**Table 3. Elements and classes for creating a connection and getting events**</span></span>

|<span data-ttu-id="45976-252">**预订类型**</span><span class="sxs-lookup"><span data-stu-id="45976-252">**Subscription type**</span></span>|<span data-ttu-id="45976-253">**EWS 操作**</span><span class="sxs-lookup"><span data-stu-id="45976-253">**EWS operation**</span></span>|<span data-ttu-id="45976-254">**EWS 托管的 API 方法**</span><span class="sxs-lookup"><span data-stu-id="45976-254">**EWS Managed API method**</span></span>|<span data-ttu-id="45976-255">**它的用途**</span><span class="sxs-lookup"><span data-stu-id="45976-255">**What it does**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="45976-256">流式处理</span><span class="sxs-lookup"><span data-stu-id="45976-256">Streaming</span></span>  <br/> |[<span data-ttu-id="45976-257">GetStreamingEvents 操作</span><span class="sxs-lookup"><span data-stu-id="45976-257">GetStreamingEvents operation</span></span>](http://msdn.microsoft.com/library/8da95423-72bc-4034-90a8-162eedcd059b%28Office.15%29.aspx) <br/> |[<span data-ttu-id="45976-258">StreamingSubscriptionConnection.AddSubscription 方法</span><span class="sxs-lookup"><span data-stu-id="45976-258">StreamingSubscriptionConnection.AddSubscription method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.addsubscription%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="45976-259">创建悬挂事件发生时做出响应的服务器上的 get 请求。</span><span class="sxs-lookup"><span data-stu-id="45976-259">Creates a hanging get request on the server, which is responded to when events occur.</span></span>  <br/> |
|<span data-ttu-id="45976-260">提取</span><span class="sxs-lookup"><span data-stu-id="45976-260">Pull</span></span>  <br/> |[<span data-ttu-id="45976-261">GetEvents 操作</span><span class="sxs-lookup"><span data-stu-id="45976-261">GetEvents operation</span></span>](http://msdn.microsoft.com/library/f268efe5-9a1a-41a2-b6a6-51fcde7720a1%28Office.15%29.aspx) <br/> |[<span data-ttu-id="45976-262">PullSubscription.GetEvents 方法</span><span class="sxs-lookup"><span data-stu-id="45976-262">PullSubscription.GetEvents method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.pullsubscription.getevents%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="45976-263">获取从服务器中请求通知事件。</span><span class="sxs-lookup"><span data-stu-id="45976-263">Gets pull notification events from the server.</span></span>  <br/> |
|<span data-ttu-id="45976-264">推送</span><span class="sxs-lookup"><span data-stu-id="45976-264">Push</span></span>  <br/> |<span data-ttu-id="45976-265">不适用。</span><span class="sxs-lookup"><span data-stu-id="45976-265">Not applicable.</span></span>  <br/> |<span data-ttu-id="45976-266">不适用。</span><span class="sxs-lookup"><span data-stu-id="45976-266">Not applicable.</span></span>  <br/> |<span data-ttu-id="45976-267">推送通知会自动发送给 web 服务侦听器 (订阅请求中指定的回调 URL)。</span><span class="sxs-lookup"><span data-stu-id="45976-267">Push notifications are automatically sent to the web service listener (the callback URL specified in the subscription request).</span></span> <span data-ttu-id="45976-268">没有其他方法或操作需要调用。</span><span class="sxs-lookup"><span data-stu-id="45976-268">No additional methods or operations need to be called.</span></span>  <br/> |
   
## <a name="how-do-i-unsubscribe-to-notifications"></a><span data-ttu-id="45976-269">如何取消订阅通知？</span><span class="sxs-lookup"><span data-stu-id="45976-269">How do I unsubscribe to notifications?</span></span>
<span data-ttu-id="45976-270"><a name="bk_notifunsubscribe"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-270"></span></span>

<span data-ttu-id="45976-271">下表列出了您可以在其中取消订阅的每种类型的方式。</span><span class="sxs-lookup"><span data-stu-id="45976-271">The following table lists the ways in which you can unsubscribe to each type of subscription.</span></span>
  
<span data-ttu-id="45976-272">**表 4。操作和通知取消订阅的方法**</span><span class="sxs-lookup"><span data-stu-id="45976-272">**Table 4. Operations and methods for unsubscribing to notifications**</span></span>

|<span data-ttu-id="45976-273">**预订类型**</span><span class="sxs-lookup"><span data-stu-id="45976-273">**Subscription type**</span></span>|<span data-ttu-id="45976-274">**EWS**</span><span class="sxs-lookup"><span data-stu-id="45976-274">**EWS**</span></span>|<span data-ttu-id="45976-275">**EWS Managed API**</span><span class="sxs-lookup"><span data-stu-id="45976-275">**EWS Managed API**</span></span>||
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="45976-276">流式处理</span><span class="sxs-lookup"><span data-stu-id="45976-276">Streaming</span></span>  <br/> |[<span data-ttu-id="45976-277">取消操作</span><span class="sxs-lookup"><span data-stu-id="45976-277">Unsubscribe operation</span></span>](http://msdn.microsoft.com/library/994a9d2b-1501-4804-90f0-12bd914496ec%28Office.15%29.aspx) <br/> |[<span data-ttu-id="45976-278">StreamingSubscription.BeginUnsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="45976-278">StreamingSubscription.BeginUnsubscribe method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.streamingsubscription.beginunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-279">StreamingSubscription.EndUnsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="45976-279">StreamingSubscription.EndUnsubscribe method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.streamingsubscription.endunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-280">StreamingSubscription.Unsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="45976-280">StreamingSubscription.Unsubscribe method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.streamingsubscription.unsubscribe%28v=exchg.80%29.aspx) <br/> ||
|<span data-ttu-id="45976-281">提取</span><span class="sxs-lookup"><span data-stu-id="45976-281">Pull</span></span>  <br/> |[<span data-ttu-id="45976-282">取消操作</span><span class="sxs-lookup"><span data-stu-id="45976-282">Unsubscribe operation</span></span>](http://msdn.microsoft.com/library/994a9d2b-1501-4804-90f0-12bd914496ec%28Office.15%29.aspx) <br/> |[<span data-ttu-id="45976-283">PullSubscription.BeginUnsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="45976-283">PullSubscription.BeginUnsubscribe method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.pullsubscription.beginunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-284">PullSubscription.EndUnsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="45976-284">PullSubscription.EndUnsubscribe method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.pullsubscription.endunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="45976-285">PullSubscription.Unsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="45976-285">PullSubscription.Unsubscribe method</span></span>](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.pullsubscription.unsubscribe%28v=exchg.80%29.aspx) <br/> ||
|<span data-ttu-id="45976-286">推送</span><span class="sxs-lookup"><span data-stu-id="45976-286">Push</span></span>  <br/> |<span data-ttu-id="45976-287">[SendNotificationResponseMessage](http://msdn.microsoft.com/library/2c6d681b-67ac-4331-bc6b-a2e709b638e3%28Office.15%29.aspx)的[StatusFrequency](http://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx)元素中返回**取消订阅**</span><span class="sxs-lookup"><span data-stu-id="45976-287">Return **Unsubscribe** in the [StatusFrequency](http://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx) element of the [SendNotificationResponseMessage](http://msdn.microsoft.com/library/2c6d681b-67ac-4331-bc6b-a2e709b638e3%28Office.15%29.aspx)</span></span> <br/> |<span data-ttu-id="45976-288">不可用。</span><span class="sxs-lookup"><span data-stu-id="45976-288">Not applicable.</span></span> <span data-ttu-id="45976-289">而是让订阅超时。</span><span class="sxs-lookup"><span data-stu-id="45976-289">Let the subscription time out instead.</span></span>  <br/> ||
   
<span data-ttu-id="45976-290">此外，您可以让每个订阅超时。</span><span class="sxs-lookup"><span data-stu-id="45976-290">Alternatively, you can let each of the subscriptions time out.</span></span> 
  
<span data-ttu-id="45976-291">**表 5。订阅超时**</span><span class="sxs-lookup"><span data-stu-id="45976-291">**Table 5. Subscription time-outs**</span></span>

|<span data-ttu-id="45976-292">**预订类型**</span><span class="sxs-lookup"><span data-stu-id="45976-292">**Subscription type**</span></span>|<span data-ttu-id="45976-293">**Ews 的超时值**</span><span class="sxs-lookup"><span data-stu-id="45976-293">**Timeout value in EWS**</span></span>|<span data-ttu-id="45976-294">**EWS 托管 API 中的超时值**</span><span class="sxs-lookup"><span data-stu-id="45976-294">**Timeout value in the EWS Managed API**</span></span>|<span data-ttu-id="45976-295">**超时处理**</span><span class="sxs-lookup"><span data-stu-id="45976-295">**Timeout handling**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="45976-296">流式处理</span><span class="sxs-lookup"><span data-stu-id="45976-296">Streaming</span></span>  <br/> |<span data-ttu-id="45976-297">[ConnectionTimeout](http://msdn.microsoft.com/library/14da68a0-bcca-4281-a774-47644baa4ee9%28Office.15%29.aspx)元素</span><span class="sxs-lookup"><span data-stu-id="45976-297">[ConnectionTimeout](http://msdn.microsoft.com/library/14da68a0-bcca-4281-a774-47644baa4ee9%28Office.15%29.aspx) element</span></span>  <br/> | <span data-ttu-id="45976-298">*生存期* [StreamingSubscriptionConnection](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.streamingsubscriptionconnection%28v=exchg.80%29.aspx)构造函数参数</span><span class="sxs-lookup"><span data-stu-id="45976-298">*lifetime*  parameter of the [StreamingSubscriptionConnection](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.streamingsubscriptionconnection%28v=exchg.80%29.aspx) constructor</span></span>  <br/> |<span data-ttu-id="45976-299">对于 EWS 托管 API 后经过的超时值， [OnDisconnect](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.ondisconnect%28v=exchg.80%29.aspx)事件引发。</span><span class="sxs-lookup"><span data-stu-id="45976-299">For the EWS Managed API, after the timeout value elapses, the [OnDisconnect](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.ondisconnect%28v=exchg.80%29.aspx) event is raised.</span></span> <span data-ttu-id="45976-300">如果未调用[StreamingSubscriptionConnection.Open](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.open%28v=exchg.80%29.aspx)方法，则连接已关闭。</span><span class="sxs-lookup"><span data-stu-id="45976-300">If the [StreamingSubscriptionConnection.Open](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.open%28v=exchg.80%29.aspx) method is not called, the connection is closed.</span></span>  <br/> <span data-ttu-id="45976-301">对于 EWS 后经过的超时值，, [GetUserConfigurationResponse](http://msdn.microsoft.com/library/5e418c91-c836-4de0-a80d-f0dad0c684d7%28Office.15%29.aspx)消息返回[ConnectionStatus](http://msdn.microsoft.com/library/4300f9d6-8bf9-48c2-9f07-d80197864e17%28Office.15%29.aspx)值的已关闭。</span><span class="sxs-lookup"><span data-stu-id="45976-301">For EWS, after the timeout value elapses, the [GetUserConfigurationResponse](http://msdn.microsoft.com/library/5e418c91-c836-4de0-a80d-f0dad0c684d7%28Office.15%29.aspx) message returns a [ConnectionStatus](http://msdn.microsoft.com/library/4300f9d6-8bf9-48c2-9f07-d80197864e17%28Office.15%29.aspx) value of Closed.</span></span>  <br/> |
|<span data-ttu-id="45976-302">提取</span><span class="sxs-lookup"><span data-stu-id="45976-302">Pull</span></span>  <br/> |<span data-ttu-id="45976-303">[超时](http://msdn.microsoft.com/library/c2e1ca5a-6667-4f6f-aac4-89de33bddc54%28Office.15%29.aspx)元素</span><span class="sxs-lookup"><span data-stu-id="45976-303">[Timeout](http://msdn.microsoft.com/library/c2e1ca5a-6667-4f6f-aac4-89de33bddc54%28Office.15%29.aspx) element</span></span>  <br/> | <span data-ttu-id="45976-304">*timeout*参数的[SubscribeToPullNotification](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotifications%28v=exchg.80%29.aspx)方法</span><span class="sxs-lookup"><span data-stu-id="45976-304">*timeout*  parameter of the [SubscribeToPullNotification](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotifications%28v=exchg.80%29.aspx) method</span></span>  <br/> |<span data-ttu-id="45976-305">回拨此前的超时值后，服务器中删除订阅。</span><span class="sxs-lookup"><span data-stu-id="45976-305">After the timeout value elapses, the server deletes the subscription.</span></span>  <br/> |
|<span data-ttu-id="45976-306">推送</span><span class="sxs-lookup"><span data-stu-id="45976-306">Push</span></span>  <br/> |<span data-ttu-id="45976-307">[StatusFrequency](http://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx)元素</span><span class="sxs-lookup"><span data-stu-id="45976-307">[StatusFrequency](http://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx) element</span></span>  <br/> | <span data-ttu-id="45976-308">*频率* [SubscribeToPushNotification](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotifications%28v=exchg.80%29.aspx)方法参数</span><span class="sxs-lookup"><span data-stu-id="45976-308">*frequency*  parameter of the [SubscribeToPushNotification](http://msdn.microsoft.com/zh-cn/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotifications%28v=exchg.80%29.aspx) method</span></span>  <br/> |<span data-ttu-id="45976-309">如果服务器未收到对推送通知或状态 ping 的响应，它重试停止发送通知前几次发送通知。</span><span class="sxs-lookup"><span data-stu-id="45976-309">If the server does not receive a response to a push notification or status ping, it retries sending the notification several times before it stops sending the notifications.</span></span> <span data-ttu-id="45976-310">有关详细信息，请参阅[StatusFrequency](http://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx)。</span><span class="sxs-lookup"><span data-stu-id="45976-310">For more information, see [StatusFrequency](http://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx).</span></span>  <br/> |
   
## <a name="can-i-limit-subscriptions"></a><span data-ttu-id="45976-311">可以将限制订阅？</span><span class="sxs-lookup"><span data-stu-id="45976-311">Can I limit subscriptions?</span></span>
<span data-ttu-id="45976-312"><a name="bk_limitsubs"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-312"></span></span>

<span data-ttu-id="45976-313">在本地部署中，您可以限制的每个用户的订阅数的限制策略的[EwsMaxSubscriptions 限制参数](ews-throttling-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="45976-313">In an on-premises deployment, you can limit the number of subscriptions per user with the [EwsMaxSubscriptions throttling parameter](ews-throttling-in-exchange.md) of the throttling policy.</span></span> <span data-ttu-id="45976-314">可以将该策略应用于所有用户还是仅特定用户。</span><span class="sxs-lookup"><span data-stu-id="45976-314">That policy can be applied to all users or just specific users.</span></span> <span data-ttu-id="45976-315">限制策略**EwsMaxSubscriptions**不可用于 Exchange Online 配置。</span><span class="sxs-lookup"><span data-stu-id="45976-315">The **EwsMaxSubscriptions** throttling policy is not configurable for Exchange Online.</span></span> 
  
## <a name="in-this-section"></a><span data-ttu-id="45976-316">本节内容</span><span class="sxs-lookup"><span data-stu-id="45976-316">In this section</span></span>
<span data-ttu-id="45976-317"><a name="bk_limitsubs"> </a></span><span class="sxs-lookup"><span data-stu-id="45976-317"></span></span>

- [<span data-ttu-id="45976-318">有关在 Exchange 中使用 EWS 邮箱事件流通知</span><span class="sxs-lookup"><span data-stu-id="45976-318">Stream notifications about mailbox events by using EWS in Exchange</span></span>](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)
    
- [<span data-ttu-id="45976-319">在 Exchange 使用 EWS 提取有关邮箱事件的通知</span><span class="sxs-lookup"><span data-stu-id="45976-319">Pull notifications about mailbox events by using EWS in Exchange</span></span>](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)
    
- [<span data-ttu-id="45976-320">在 Exchange 维护一组订阅和邮箱服务器之间的关联</span><span class="sxs-lookup"><span data-stu-id="45976-320">Maintain affinity between a group of subscriptions and the Mailbox server in Exchange</span></span>](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md)
    
- [<span data-ttu-id="45976-321">在 Exchange 处理与通知相关 EWS 中的错误</span><span class="sxs-lookup"><span data-stu-id="45976-321">Handling notification-related errors in EWS in Exchange</span></span>](handling-notification-related-errors-in-ews-in-exchange.md)
    
## <a name="see-also"></a><span data-ttu-id="45976-322">另请参阅</span><span class="sxs-lookup"><span data-stu-id="45976-322">See also</span></span>

- [<span data-ttu-id="45976-323">开发 Exchange Web 服务客户端</span><span class="sxs-lookup"><span data-stu-id="45976-323">Develop web service clients for Exchange</span></span>](develop-web-service-clients-for-exchange.md)
- [<span data-ttu-id="45976-324">Exchange web 服务引用</span><span class="sxs-lookup"><span data-stu-id="45976-324">Web services reference for Exchange</span></span>](../web-service-reference/web-services-reference-for-exchange.md)
- [<span data-ttu-id="45976-325">Start using web services in Exchange</span><span class="sxs-lookup"><span data-stu-id="45976-325">Start using web services in Exchange</span></span>](start-using-web-services-in-exchange.md)
- [<span data-ttu-id="45976-326">邮箱同步和交换中的 EWS</span><span class="sxs-lookup"><span data-stu-id="45976-326">Mailbox synchronization and EWS in Exchange</span></span>](mailbox-synchronization-and-ews-in-exchange.md)
- [<span data-ttu-id="45976-327">推送通知示例应用程序</span><span class="sxs-lookup"><span data-stu-id="45976-327">Push Notification Sample Application</span></span>](http://msdn.microsoft.com/library/db1f8523-fa44-483f-bdb6-ab5939b52eee%28Office.15%29.aspx)
    

