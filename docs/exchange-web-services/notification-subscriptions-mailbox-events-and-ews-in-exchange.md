---
title: Notification subscriptions, mailbox events, and EWS in Exchange
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.assetid: 76136f28-0dad-4ecc-9dd7-a45a1861e4b0
description: 了解 Exchange 中的 EWS 通知订阅和邮箱事件。
localization_priority: Priority
ms.openlocfilehash: 2a99b1922e021a8f5f221381d7f2965c3e1ab504
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/03/2020
ms.locfileid: "44459346"
---
# <a name="notification-subscriptions-mailbox-events-and-ews-in-exchange"></a><span data-ttu-id="e5ec3-103">Notification subscriptions, mailbox events, and EWS in Exchange</span><span class="sxs-lookup"><span data-stu-id="e5ec3-103">Notification subscriptions, mailbox events, and EWS in Exchange</span></span>

<span data-ttu-id="e5ec3-104">了解 Exchange 中的 EWS 通知订阅和邮箱事件。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-104">Find out about notification subscriptions and mailbox event in EWS in Exchange.</span></span>
  
<span data-ttu-id="e5ec3-105">您可以使用 EWS 托管 API 和 Exchange Web 服务（EWS）在邮箱中发生事件时，或者在邮箱中的一个或多个文件夹中的一个或多个文件夹中，订阅接收通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-105">You can use both the EWS Managed API and Exchange Web Services (EWS) to subscribe to receive notifications when events occur in a mailbox, or in one or more of the folders in a mailbox.</span></span> <span data-ttu-id="e5ec3-106">可以使用三种订阅类型：流式通知、请求通知和推送通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-106">Three subscription types are available: streaming notifications, pull notifications, and push notifications.</span></span> <span data-ttu-id="e5ec3-107">这些订阅类型中的每一种都使用不同的技术来接收或检索通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-107">Each of these subscription types uses different techniques to receive or retrieve the notifications.</span></span>
  
## <a name="getting-notifications---what-are-my-options"></a><span data-ttu-id="e5ec3-108">获取通知-什么是我的选项？</span><span class="sxs-lookup"><span data-stu-id="e5ec3-108">Getting notifications - what are my options?</span></span>
<span data-ttu-id="e5ec3-109"><a name="bk_notiftypes"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-109"><a name="bk_notiftypes"> </a></span></span>

<span data-ttu-id="e5ec3-110">EWS 包括三种单独工作的订阅类型，用于将服务器上的更改通知客户端。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-110">EWS includes three subscription types that work independently to notify the client of changes on the server.</span></span> <span data-ttu-id="e5ec3-111">无论您选择哪种订阅类型，最终都有权访问所有相同的通知事件，这就是您如何获取它们的问题。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-111">No matter which subscription type you choose, you'll have access to all the same notification events in the end - it's just a matter of how you get them.</span></span>
  
<span data-ttu-id="e5ec3-112">**表1。订阅类型**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-112">**Table 1. Subscription types**</span></span>

|<span data-ttu-id="e5ec3-113">**选项**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-113">**Option**</span></span>|<span data-ttu-id="e5ec3-114">**说明**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-114">**Description**</span></span>|<span data-ttu-id="e5ec3-115">**适合我吗？**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-115">**Is it right for me?**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="e5ec3-116">流式处理通知</span><span class="sxs-lookup"><span data-stu-id="e5ec3-116">Streaming notifications</span></span>  <br/> |<span data-ttu-id="e5ec3-117">由服务器通过在指定时间段内保持打开状态的连接发送的通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-117">Notifications that are sent by the server through a connection that remains open for a specified period of time.</span></span>  <br/> |<span data-ttu-id="e5ec3-118">通常，大多数应用程序都建议使用流式通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-118">Streaming notifications are generally recommended for most applications.</span></span> <span data-ttu-id="e5ec3-119">它们类似于请求和推送通知，并提供了这两个方面的最佳优势。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-119">They're similar to pull and push notifications, and offer the best of both worlds.</span></span> <span data-ttu-id="e5ec3-120">建立通知订阅后，连接将保持打开状态达30分钟，以允许服务器将通知推送回客户端。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-120">After you establish your notification subscription, the connection remains open for up to 30 minutes to allow the server to push notifications back to the client.</span></span> <span data-ttu-id="e5ec3-121">无需请求更新，就像使用请求订阅一样，无需像使用推送订阅那样创建 web 服务侦听器应用程序。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-121">No need to request updates, like you would with a pull subscription, and you don't have to create a web service listener application like you would with a push subscription.</span></span>  <br/> |
|<span data-ttu-id="e5ec3-122">请求通知</span><span class="sxs-lookup"><span data-stu-id="e5ec3-122">Pull notifications</span></span>  <br/> |<span data-ttu-id="e5ec3-123">客户端请求（或请求）的通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-123">Notifications that are requested (or pulled) by the client.</span></span>  <br/> |<span data-ttu-id="e5ec3-124">"拉" 通知通常最适用于松散耦合客户端，其中客户端不可靠地连接到网络。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-124">Pull notifications are generally most appropriate for loosely coupled clients, where the client is not reliably connected to the network.</span></span> <span data-ttu-id="e5ec3-125">由于客户端向服务器发送频繁的请求以检索通知，并且并非所有请求都会检索通知，因此请求通知可以在客户端和服务器之间创建多余的流量。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-125">Pull notifications can create excess traffic between the client and the server because the client is sending frequent requests to the server to retrieve notifications, and not all requests result in notifications retrieved.</span></span>  <br/> |
|<span data-ttu-id="e5ec3-126">推送通知</span><span class="sxs-lookup"><span data-stu-id="e5ec3-126">Push notifications</span></span>  <br/> |<span data-ttu-id="e5ec3-127">通过回调地址将服务器发送（或推送）到客户端 web 服务的通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-127">Notifications that are sent (or pushed) by the server to a client-side web service via a callback address.</span></span>  <br/> |<span data-ttu-id="e5ec3-128">通常，推送通知提供比 pull 通知更小的通知延迟，并且适用于服务器具有可靠访问权限且客户端为 IP 可寻址的紧密耦合客户端。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-128">Generally, push notifications provide for smaller notification latency than pull notifications and are suited for tightly coupled clients to which the server has reliable access and the client is IP addressable.</span></span> <span data-ttu-id="e5ec3-129">但是，由于 Exchange 2010 中出现流式通知，因此推送通知已停止。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-129">However, push notifications have fallen out of favor since the advent of streaming notifications in Exchange 2010.</span></span> <span data-ttu-id="e5ec3-130">如果可能，我们建议使用流式通知，而不是将推送通知转发。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-130">If possible, we recommend that you use streaming notifications instead of push notifications going forward.</span></span> <span data-ttu-id="e5ec3-131">推送通知要求您编写侦听器应用程序，即将通知推送到的位置。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-131">Push notifications require that you write a listener application, which is where the notifications are pushed to.</span></span> <span data-ttu-id="e5ec3-132">这对 "拉" 通知略有好处，因为它可减少线路流量，但会因需要单独的应用程序而增加开销。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-132">This has a slight benefit over pull notifications in that it reduces wire traffic, but it adds overhead by requiring a separate application.</span></span>  <br/> |
   
## <a name="what-ews-events-can-i-subscribe-to"></a><span data-ttu-id="e5ec3-133">我可以订阅哪些 EWS 事件？</span><span class="sxs-lookup"><span data-stu-id="e5ec3-133">What EWS events can I subscribe to?</span></span>
<span data-ttu-id="e5ec3-134"><a name="bk_eventtypes"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-134"><a name="bk_eventtypes"> </a></span></span>

<span data-ttu-id="e5ec3-135">客户端订阅的 EWS 事件的类型由 EWS 托管 API 的[事件](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx)类型枚举或 Ews 的[事件](https://msdn.microsoft.com/library/04b70f9e-c226-4130-958e-0db0275cf58b%28Office.15%29.aspx)类型元素定义。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-135">The types of EWS events that clients subscribe to are defined by the [EventType](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx) enumeration for the EWS Managed API or the [EventType](https://msdn.microsoft.com/library/04b70f9e-c226-4130-958e-0db0275cf58b%28Office.15%29.aspx) element for EWS.</span></span> <span data-ttu-id="e5ec3-136">以下 EWS 事件可用于订阅：</span><span class="sxs-lookup"><span data-stu-id="e5ec3-136">The following EWS events are available for subscription:</span></span> 
  
- <span data-ttu-id="e5ec3-137">NewMail —到达收件箱中的新邮件。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-137">NewMail — A new message arrived in the Inbox.</span></span>
    
- <span data-ttu-id="e5ec3-138">已删除—从收件箱中硬删除邮件。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-138">Deleted — A message was hard deleted from the Inbox.</span></span> <span data-ttu-id="e5ec3-139">若要了解有关已删除邮件通知的详细信息，请参阅[使用 exchange 中的 Ews 删除项目](deleting-items-by-using-ews-in-exchange.md)和[获取 EXCHANGE 中与 ews 删除相关邮箱事件的通知](pull-notifications-for-ews-deletion-related-mailbox-events-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-139">To learn more about deleted item notifications, see [Deleting items by using EWS in Exchange](deleting-items-by-using-ews-in-exchange.md) and [Pull notifications for EWS deletion-related mailbox events in Exchange](pull-notifications-for-ews-deletion-related-mailbox-events-in-exchange.md).</span></span>
    
- <span data-ttu-id="e5ec3-140">已修改-项目或文件夹已更改。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-140">Modified — An item or folder was changed.</span></span>
    
- <span data-ttu-id="e5ec3-141">已移动-项目或文件夹已移动。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-141">Moved — An item or folder was moved.</span></span> 
    
- <span data-ttu-id="e5ec3-142">复制-项目或文件夹已复制。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-142">Copied — An item or folder was copied.</span></span>
    
- <span data-ttu-id="e5ec3-143">已创建-项目或文件夹已创建。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-143">Created — An item or folder was created.</span></span> 
    
- <span data-ttu-id="e5ec3-144">FreeBusyChanged —用户的忙/闲信息已更改。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-144">FreeBusyChanged — A user's free busy information has been changed.</span></span>
    
<span data-ttu-id="e5ec3-145">另一个 EWS 事件类型（状态事件）由[事件](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx)类型元素定义，但您不订阅此事件。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-145">Another EWS event type, the Status event, is defined by the [EventType](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx) element, but you don't subscribe to this event.</span></span> <span data-ttu-id="e5ec3-146">相反，它由服务器发送，以检查客户端的状态以进行流式传输和推送通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-146">Instead, it's sent by the server to check the status of the client for streaming and push notifications only.</span></span> <span data-ttu-id="e5ec3-147">客户端需要响应此事件的需要，否则客户端将超时。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-147">The client needs to respond to this event needs or the client will time out.</span></span> 
  
<span data-ttu-id="e5ec3-148">单个用户操作通常会导致创建多个通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-148">A single user action often results in the creation of multiple notifications.</span></span> <span data-ttu-id="e5ec3-149">为了说明这一点，下图显示了一些常见方案以及为每个方案创建的通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-149">To illustrate this, the following figure shows some common scenarios and the notifications created for each one.</span></span> <span data-ttu-id="e5ec3-150">客户端设置会影响收到的通知，因此这并不是所有配置选项和生成的通知的详尽列表。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-150">Client settings have an impact on the notifications received, so this is not an exhaustive list of all the configuration options and resulting notifications.</span></span>
  
<span data-ttu-id="e5ec3-151">**图1。通知订阅返回的事件类型**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-151">**Figure 1. Event types returned by notification subscriptions**</span></span>

![此表格显示在常见用户情境下发送的通知，例如收到新的电子邮件、创建新的文件夹、移动某个文件夹等。](media/Exchange2013_Notifications_Events.png)
  
<span data-ttu-id="e5ec3-153">图1简化了通知过程。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-153">Figure 1 simplifies the notification process.</span></span> <span data-ttu-id="e5ec3-154">实际上，可以为单个用户操作创建多个通知（甚至相同类型的多个通知）。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-154">In reality, multiple notifications (even multiple notifications of the same type) can be created for a single user action.</span></span> <span data-ttu-id="e5ec3-155">例如，在文件夹移动操作中，将创建三个文件夹事件：一个用于要修改的文件夹，一个用于旧父文件夹，一个用于新的父文件夹。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-155">For example, in the case of a folder move operation, three folder events are created: one for the folder being modified, one for the old parent folder, and one for the new parent folder.</span></span> <span data-ttu-id="e5ec3-156">由于可能会触发单个操作的多个事件，因此我们建议您在[同步操作中构建几秒的等待时间](mailbox-synchronization-and-ews-in-exchange.md#bk_bestpractices)，以便仅在操作完成时进行同步，而不是中途通过操作进行同步。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-156">Because numerous events can be fired for a single operation, we recommend that you [build a wait time of a few seconds into your synchronization operations](mailbox-synchronization-and-ews-in-exchange.md#bk_bestpractices), so that you only synchronize when the action is complete, instead of partway through the operation.</span></span>
  
<span data-ttu-id="e5ec3-157">还要认识的是，每个用户选择的配置设置会影响创建哪些通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-157">It's also important to realize that the configuration settings that each user chooses will affect which notifications are created.</span></span> <span data-ttu-id="e5ec3-158">例如，某些用户的忙/闲数据会自动更新，并且在收到新的会议请求（即使他们已阅读项目之前），将创建 FreeBusyChanged 事件。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-158">For example, some users' free busy data is updated automatically and the FreeBusyChanged event is created when a new meeting request is received, even before they've read the item.</span></span> <span data-ttu-id="e5ec3-159">对于其他用户，不会更新忙闲数据，也不会在接受会议后再创建 FreeBusyChanged 事件。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-159">For other users, free busy data isn't updated and the FreeBusyChanged event isn't created until after the meeting has been accepted.</span></span> <span data-ttu-id="e5ec3-160">这些设置会对服务器所创建的通知产生重大影响。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-160">These settings can have a considerable impact on the notifications created by the server.</span></span>
  
## <a name="how-do-ews-notifications-work"></a><span data-ttu-id="e5ec3-161">EWS 通知的工作原理是什么？</span><span class="sxs-lookup"><span data-stu-id="e5ec3-161">How do EWS notifications work?</span></span>
<span data-ttu-id="e5ec3-162"><a name="bk_howwork"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-162"><a name="bk_howwork"> </a></span></span>

<span data-ttu-id="e5ec3-163">EWS 通知在订阅基础上进行处理。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-163">EWS notifications are handled on a subscription basis.</span></span> <span data-ttu-id="e5ec3-164">通常每个邮箱有一个订阅，在邮箱订阅中，您可以订阅部分或所有文件夹。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-164">Typically there's one subscription per mailbox, and within the mailbox subscription you can subscribe to some or all folders.</span></span> <span data-ttu-id="e5ec3-165">您可以决定要订阅的通知类型（流、拉取或推送）以及要接收的事件类型（NewMail、已创建、已删除、已修改等），然后创建订阅。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-165">You decide what kind of notification to subscribe to (streaming, pull, or push) and what kind of events you'd like to receive (NewMail, Created, Deleted, Modified, etc.), and then you create a subscription.</span></span> <span data-ttu-id="e5ec3-166">然后，将 EWS 事件从邮箱服务器异步发送到客户端。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-166">The EWS events are then sent asynchronously from the mailbox server to the client.</span></span> <span data-ttu-id="e5ec3-167">（历史记录课程：事件是 Exchange 2007 中的同步-并且事件存储在 Exchange 2010 中的客户端访问服务器上，而不是更多！）。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-167">(History lesson: events are synchronous in Exchange 2007 - and events are stored on the Client Access server in Exchange 2010, but no more!).</span></span>
  
<span data-ttu-id="e5ec3-168">根据您拥有的订阅类型，将通知发送到客户端的方式会有所不同。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-168">Depending on the type of subscription you have, the ways in which the notifications are sent to the client vary.</span></span> <span data-ttu-id="e5ec3-169">本节介绍了每种类型的订阅如何更详细地工作。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-169">This section describes how each type of subscription works in more detail.</span></span>
  
### <a name="ews-streaming-notifications"></a><span data-ttu-id="e5ec3-170">EWS 流通知</span><span class="sxs-lookup"><span data-stu-id="e5ec3-170">EWS streaming notifications</span></span>
<span data-ttu-id="e5ec3-171"><a name="bk_streamnotif"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-171"><a name="bk_streamnotif"> </a></span></span>

<span data-ttu-id="e5ec3-172">流式通知依赖于服务器上的挂起 get 请求，以保持流式订阅连接处于打开状态，这样，在连接处于活动状态时发生的任何事件都将立即流式传输到客户端。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-172">Streaming notifications rely on a hanging get request on the server to keep a streaming subscription connection open, so that any events that occur while the connection is active are streamed to the client immediately.</span></span> <span data-ttu-id="e5ec3-173">可以在单个连接的过程中发送多个通知，并且该连接将保持打开状态，直到间隔时间到期，或最多为30分钟。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-173">Multiple notifications can be sent over the course of a single connection, and the connection stays open until the interval expires, or for a maximum of 30 minutes.</span></span> <span data-ttu-id="e5ec3-174">连接过期后，客户端将再次发送挂起的 get 请求。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-174">After the connection expires, the client sends the hanging get request again.</span></span> <span data-ttu-id="e5ec3-175">图2显示流式处理订阅和流式处理通知的工作原理。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-175">Figure 2 shows how streaming subscriptions and streaming notifications work.</span></span>
  
<span data-ttu-id="e5ec3-176">**图2。流式通知概述**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-176">**Figure 2. Streaming notification overview**</span></span>

![此插图显示流通知的工作原理。设置流通知的步骤：1. 订阅；2. 打开连接；3. 等待事件；4. 接收事件，重复 3 和 4；5. 关闭或保留连接；6. 取消订阅或超时。](media/Exchange2013_Notifications_StreamSub.png)
  
<span data-ttu-id="e5ec3-185">有关创建流式通知的信息，请参阅[使用 Exchange 中的 EWS 流式处理有关邮箱事件的通知](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-185">For information about creating streaming notifications, see [Stream notifications about mailbox events by using EWS in Exchange](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span>
  
### <a name="ews-pull-notifications"></a><span data-ttu-id="e5ec3-186">EWS 拉取通知</span><span class="sxs-lookup"><span data-stu-id="e5ec3-186">EWS pull notifications</span></span>
<span data-ttu-id="e5ec3-187"><a name="bk_pullnotif"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-187"><a name="bk_pullnotif"> </a></span></span>

<span data-ttu-id="e5ec3-188">"拉" 通知依赖客户端要求在客户端管理的时间间隔内发出通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-188">Pull notifications rely on the client asking for the notifications on an interval that the client manages.</span></span> <span data-ttu-id="e5ec3-189">这可能会导致无通知的 GetEvents 响应。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-189">This can result in GetEvents responses with no notifications.</span></span> <span data-ttu-id="e5ec3-190">图3显示了请求订阅和请求通知的工作原理。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-190">Figure 3 shows how pull subscriptions and pull notifications work.</span></span>
  
<span data-ttu-id="e5ec3-191">**图3。拉取通知概述**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-191">**Figure 3. Pull notification overview**</span></span>

![此插图显示拉取通知的工作原理。设置拉取通知的步骤：1. 订阅；2. 发送 GetEvents；3. 接收答复，重复 2 和 3；4. 关闭或保留连接；5. 取消订阅或超时。](media/Exchange2013_Notifications_PullSub.png)
  
<span data-ttu-id="e5ec3-199">有关创建请求通知的信息，请参阅[使用 Exchange 中的 EWS 在邮箱事件中提取通知](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-199">For information about creating pull notifications, see [Pull notifications about mailbox events by using EWS in Exchange](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span>
  
### <a name="ews-push-notifications"></a><span data-ttu-id="e5ec3-200">EWS 推送通知</span><span class="sxs-lookup"><span data-stu-id="e5ec3-200">EWS push notifications</span></span>
<span data-ttu-id="e5ec3-201"><a name="bk_pushnotif"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-201"><a name="bk_pushnotif"> </a></span></span>

<span data-ttu-id="e5ec3-202">推送通知依赖于将通知推送回客户端的服务器。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-202">Push notifications rely on the server pushing notifications back to the client.</span></span> <span data-ttu-id="e5ec3-203">如果有通知，则只有流量。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-203">There's only traffic if there's a notification.</span></span> <span data-ttu-id="e5ec3-204">图4显示了推送订阅和推送通知的工作原理。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-204">Figure 4 shows how push subscriptions and push notifications work.</span></span>
  
<span data-ttu-id="e5ec3-205">**图4。推送通知概述**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-205">**Figure 4. Push notification overview**</span></span>

![此插图显示推送通知的工作原理。设置推送通知的步骤：1. 创建侦听器；2. 订阅；3. 等待事件；4. 接收事件；5. 发送“确定”答复，重复 3、4、和 5；6. 取消订阅或超时。](media/Exchange2013_Notifications_PushSub.png)

<span data-ttu-id="e5ec3-214">如果要将[推送通知与 Exchange 2010 一起](https://msdn.microsoft.com/library/db1f8523-fa44-483f-bdb6-ab5939b52eee%28Office.15%29.aspx)使用，请考虑将应用程序升级为[使用流式通知](https://code.msdn.microsoft.com/exchange/Exchange-2013-Set-push-82738cc5)，以便不需要单独的应用程序即可接收事件。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-214">If you are using [push notifications with Exchange 2010](https://msdn.microsoft.com/library/db1f8523-fa44-483f-bdb6-ab5939b52eee%28Office.15%29.aspx), consider upgrading your application to [use streaming notifications](https://code.msdn.microsoft.com/exchange/Exchange-2013-Set-push-82738cc5), so that you don't need a separate application to receive the events.</span></span>

  
## <a name="how-do-i-subscribe-to-notifications"></a><span data-ttu-id="e5ec3-215">如何订阅通知？</span><span class="sxs-lookup"><span data-stu-id="e5ec3-215">How do I subscribe to notifications?</span></span>
<span data-ttu-id="e5ec3-216"><a name="bk_notifoperations"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-216"><a name="bk_notifoperations"> </a></span></span>

<span data-ttu-id="e5ec3-217">根据要创建的订阅类型，有许多选项可供选择，以便订阅通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-217">Depending on the type of subscription you'd like to create, you have a number of options to choose from for subscribing to notifications.</span></span>
  
<span data-ttu-id="e5ec3-218">**表2。订阅通知的操作和方法**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-218">**Table 2. Operations and methods for subscribing to notifications**</span></span>

|<span data-ttu-id="e5ec3-219">**订阅类型**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-219">**Subscription type**</span></span>|<span data-ttu-id="e5ec3-220">**EWS 操作**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-220">**EWS operation**</span></span>|<span data-ttu-id="e5ec3-221">**EWS 托管 API 方法**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-221">**EWS Managed API methods**</span></span>|<span data-ttu-id="e5ec3-222">**功能**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-222">**What it does**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="e5ec3-223">媒体</span><span class="sxs-lookup"><span data-stu-id="e5ec3-223">Streaming</span></span>  <br/> |[<span data-ttu-id="e5ec3-224">订阅操作</span><span class="sxs-lookup"><span data-stu-id="e5ec3-224">Subscribe operation</span></span>](https://msdn.microsoft.com/library/f17c3d08-c79e-41f1-ba31-6e41e7aafd87%28Office.15%29.aspx) <br/> |[<span data-ttu-id="e5ec3-225">ExchangeService 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-225">ExchangeService.BeginSubscribeToStreamingNotifications method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetostreamingnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-226">ExchangeService 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-226">ExchangeService.BeginSubscribeToStreamingNotificationsOnAllFolders method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetostreamingnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-227">ExchangeService 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-227">ExchangeService.SubscribeToStreamingNotificationsOnAllFolders method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetostreamingnotifications%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="e5ec3-228">创建订阅流式通知的请求。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-228">Creates a request to subscribe to streaming notifications.</span></span>  <br/> |
|<span data-ttu-id="e5ec3-229">超类</span><span class="sxs-lookup"><span data-stu-id="e5ec3-229">Pull</span></span>  <br/> |[<span data-ttu-id="e5ec3-230">订阅操作</span><span class="sxs-lookup"><span data-stu-id="e5ec3-230">Subscribe operation</span></span>](https://msdn.microsoft.com/library/f17c3d08-c79e-41f1-ba31-6e41e7aafd87%28Office.15%29.aspx) <br/> |[<span data-ttu-id="e5ec3-231">ExchangeService 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-231">ExchangeService.BeginSubscribeToPullNotifications method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopullnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-232">ExchangeService 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-232">ExchangeService.BeginSubscribeToPullNotificationsOnAllFolders method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopullnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-233">ExchangeService 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-233">ExchangeService.SubscribeToPullNotifications method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-234">ExchangeService 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-234">ExchangeService.SubscribeToPullNotificationsOnAllFolders method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="e5ec3-235">创建订阅请求通知的请求。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-235">Creates a request to subscribe to pull notifications.</span></span>  <br/> |
|<span data-ttu-id="e5ec3-236">子类</span><span class="sxs-lookup"><span data-stu-id="e5ec3-236">Push</span></span>  <br/> |[<span data-ttu-id="e5ec3-237">订阅操作</span><span class="sxs-lookup"><span data-stu-id="e5ec3-237">Subscribe operation</span></span>](https://msdn.microsoft.com/library/f17c3d08-c79e-41f1-ba31-6e41e7aafd87%28Office.15%29.aspx) <br/> |[<span data-ttu-id="e5ec3-238">BeginSubscribeToPushNotifications 重载方法 ExchangeService</span><span class="sxs-lookup"><span data-stu-id="e5ec3-238">ExchangeService.BeginSubscribeToPushNotifications overloaded method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopushnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-239">BeginSubscribeToPushNotificationsOnAllFolders 重载方法 ExchangeService</span><span class="sxs-lookup"><span data-stu-id="e5ec3-239">ExchangeService.BeginSubscribeToPushNotificationsOnAllFolders overload method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopushnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-240">SubscribeToPushNotifications 重载方法 ExchangeService</span><span class="sxs-lookup"><span data-stu-id="e5ec3-240">ExchangeService.SubscribeToPushNotifications overloaded method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-241">SubscribeToPushNotificationsOnAllFolders 重载方法 ExchangeService</span><span class="sxs-lookup"><span data-stu-id="e5ec3-241">ExchangeService.SubscribeToPushNotificationsOnAllFolders overloaded method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="e5ec3-242">创建订阅推送通知的请求。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-242">Creates a request to subscribe to push notifications.</span></span>  <br/> |
   
## <a name="how-do-i-get-ews-events"></a><span data-ttu-id="e5ec3-243">如何获取 EWS 事件？</span><span class="sxs-lookup"><span data-stu-id="e5ec3-243">How do I get EWS events?</span></span>
<span data-ttu-id="e5ec3-244"><a name="bk_getevents"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-244"><a name="bk_getevents"> </a></span></span>

<span data-ttu-id="e5ec3-245">创建订阅后，将实际事件发送到客户端的方式取决于订阅类型。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-245">After the subscription is created, the way in which the actual events are sent to the client depends on the subscription type.</span></span> 
  
<span data-ttu-id="e5ec3-246">对于流式通知，必须创建流式订阅连接，然后将订阅添加到该连接中。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-246">For streaming notifications, a streaming subscription connection must be created, and then the subscription is added to the connection.</span></span> <span data-ttu-id="e5ec3-247">您可以[通过使用 Exchange 中的 EWS 在有关邮箱事件的流通知](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)中阅读有关此过程的详细信息。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-247">You can read more about this process in [Stream notifications about mailbox events by using EWS in Exchange](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span> 
  
<span data-ttu-id="e5ec3-248">对于拉取通知，在创建订阅时初始化订阅对象，因此您只需调用**GetEvent**方法或操作来从服务器检索事件。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-248">For pull notifications, the subscription object was initialized when the subscription was created, so you just have to call the **GetEvent** method or operation to retrieve the events from the server.</span></span> <span data-ttu-id="e5ec3-249">您可以[使用 Exchange 中的 EWS 在关于邮箱事件的 Pull 通知](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)中阅读有关此信息的详细信息。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-249">You can read more about this in [Pull notifications about mailbox events by using EWS in Exchange](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span> 
  
<span data-ttu-id="e5ec3-250">下表列出了检索事件所需的操作和类。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-250">The following table lists the operations and classes required to retrieve events.</span></span> 
  
<span data-ttu-id="e5ec3-251">**表3。用于创建连接和获取事件的元素和类**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-251">**Table 3. Elements and classes for creating a connection and getting events**</span></span>

|<span data-ttu-id="e5ec3-252">**订阅类型**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-252">**Subscription type**</span></span>|<span data-ttu-id="e5ec3-253">**EWS 操作**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-253">**EWS operation**</span></span>|<span data-ttu-id="e5ec3-254">**EWS 托管的 API 方法**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-254">**EWS Managed API method**</span></span>|<span data-ttu-id="e5ec3-255">**功能**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-255">**What it does**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="e5ec3-256">媒体</span><span class="sxs-lookup"><span data-stu-id="e5ec3-256">Streaming</span></span>  <br/> |[<span data-ttu-id="e5ec3-257">GetStreamingEvents 操作</span><span class="sxs-lookup"><span data-stu-id="e5ec3-257">GetStreamingEvents operation</span></span>](https://msdn.microsoft.com/library/8da95423-72bc-4034-90a8-162eedcd059b%28Office.15%29.aspx) <br/> |[<span data-ttu-id="e5ec3-258">StreamingSubscriptionConnection 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-258">StreamingSubscriptionConnection.AddSubscription method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.addsubscription%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="e5ec3-259">在服务器上创建一个挂起的 get 请求，该请求在事件发生时对其做出响应。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-259">Creates a hanging get request on the server, which is responded to when events occur.</span></span>  <br/> |
|<span data-ttu-id="e5ec3-260">超类</span><span class="sxs-lookup"><span data-stu-id="e5ec3-260">Pull</span></span>  <br/> |[<span data-ttu-id="e5ec3-261">GetEvents 操作</span><span class="sxs-lookup"><span data-stu-id="e5ec3-261">GetEvents operation</span></span>](https://msdn.microsoft.com/library/f268efe5-9a1a-41a2-b6a6-51fcde7720a1%28Office.15%29.aspx) <br/> |[<span data-ttu-id="e5ec3-262">PullSubscription 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-262">PullSubscription.GetEvents method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.pullsubscription.getevents%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="e5ec3-263">从服务器获取请求通知事件。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-263">Gets pull notification events from the server.</span></span>  <br/> |
|<span data-ttu-id="e5ec3-264">子类</span><span class="sxs-lookup"><span data-stu-id="e5ec3-264">Push</span></span>  <br/> |<span data-ttu-id="e5ec3-265">不适用。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-265">Not applicable.</span></span>  <br/> |<span data-ttu-id="e5ec3-266">不适用。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-266">Not applicable.</span></span>  <br/> |<span data-ttu-id="e5ec3-267">推送通知会自动发送到 web 服务侦听器（订阅请求中指定的回调 URL）。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-267">Push notifications are automatically sent to the web service listener (the callback URL specified in the subscription request).</span></span> <span data-ttu-id="e5ec3-268">不需要调用其他方法或操作。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-268">No additional methods or operations need to be called.</span></span>  <br/> |
   
## <a name="how-do-i-unsubscribe-to-notifications"></a><span data-ttu-id="e5ec3-269">如何取消订阅通知？</span><span class="sxs-lookup"><span data-stu-id="e5ec3-269">How do I unsubscribe to notifications?</span></span>
<span data-ttu-id="e5ec3-270"><a name="bk_notifunsubscribe"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-270"><a name="bk_notifunsubscribe"> </a></span></span>

<span data-ttu-id="e5ec3-271">下表列出了可取消订阅每种类型的订阅的方法。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-271">The following table lists the ways in which you can unsubscribe to each type of subscription.</span></span>
  
<span data-ttu-id="e5ec3-272">**表4。取消订阅通知的操作和方法**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-272">**Table 4. Operations and methods for unsubscribing to notifications**</span></span>

|<span data-ttu-id="e5ec3-273">**订阅类型**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-273">**Subscription type**</span></span>|<span data-ttu-id="e5ec3-274">**EWS**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-274">**EWS**</span></span>|<span data-ttu-id="e5ec3-275">**EWS Managed API**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-275">**EWS Managed API**</span></span>||
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="e5ec3-276">媒体</span><span class="sxs-lookup"><span data-stu-id="e5ec3-276">Streaming</span></span>  <br/> |[<span data-ttu-id="e5ec3-277">取消订阅操作</span><span class="sxs-lookup"><span data-stu-id="e5ec3-277">Unsubscribe operation</span></span>](https://msdn.microsoft.com/library/994a9d2b-1501-4804-90f0-12bd914496ec%28Office.15%29.aspx) <br/> |[<span data-ttu-id="e5ec3-278">StreamingSubscription 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-278">StreamingSubscription.BeginUnsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscription.beginunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-279">StreamingSubscription 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-279">StreamingSubscription.EndUnsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscription.endunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-280">StreamingSubscription 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-280">StreamingSubscription.Unsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscription.unsubscribe%28v=exchg.80%29.aspx) <br/> ||
|<span data-ttu-id="e5ec3-281">超类</span><span class="sxs-lookup"><span data-stu-id="e5ec3-281">Pull</span></span>  <br/> |[<span data-ttu-id="e5ec3-282">取消订阅操作</span><span class="sxs-lookup"><span data-stu-id="e5ec3-282">Unsubscribe operation</span></span>](https://msdn.microsoft.com/library/994a9d2b-1501-4804-90f0-12bd914496ec%28Office.15%29.aspx) <br/> |[<span data-ttu-id="e5ec3-283">PullSubscription 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-283">PullSubscription.BeginUnsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.pullsubscription.beginunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-284">PullSubscription 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-284">PullSubscription.EndUnsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.pullsubscription.endunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="e5ec3-285">PullSubscription 方法</span><span class="sxs-lookup"><span data-stu-id="e5ec3-285">PullSubscription.Unsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.pullsubscription.unsubscribe%28v=exchg.80%29.aspx) <br/> ||
|<span data-ttu-id="e5ec3-286">子类</span><span class="sxs-lookup"><span data-stu-id="e5ec3-286">Push</span></span>  <br/> |<span data-ttu-id="e5ec3-287">在[SendNotificationResponseMessage](https://msdn.microsoft.com/library/2c6d681b-67ac-4331-bc6b-a2e709b638e3%28Office.15%29.aspx)的[StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx)元素中返回**取消订阅**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-287">Return **Unsubscribe** in the [StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx) element of the [SendNotificationResponseMessage](https://msdn.microsoft.com/library/2c6d681b-67ac-4331-bc6b-a2e709b638e3%28Office.15%29.aspx)</span></span> <br/> |<span data-ttu-id="e5ec3-288">不适用。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-288">Not applicable.</span></span> <span data-ttu-id="e5ec3-289">改为让订阅超时。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-289">Let the subscription time out instead.</span></span>  <br/> ||
   
<span data-ttu-id="e5ec3-290">或者，可以让每个订阅超时。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-290">Alternatively, you can let each of the subscriptions time out.</span></span> 
  
<span data-ttu-id="e5ec3-291">**表5。订阅超时**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-291">**Table 5. Subscription time-outs**</span></span>

|<span data-ttu-id="e5ec3-292">**订阅类型**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-292">**Subscription type**</span></span>|<span data-ttu-id="e5ec3-293">**以 EWS 为单位的超时值**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-293">**Timeout value in EWS**</span></span>|<span data-ttu-id="e5ec3-294">**EWS 托管 API 中的超时值**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-294">**Timeout value in the EWS Managed API**</span></span>|<span data-ttu-id="e5ec3-295">**超时处理**</span><span class="sxs-lookup"><span data-stu-id="e5ec3-295">**Timeout handling**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="e5ec3-296">媒体</span><span class="sxs-lookup"><span data-stu-id="e5ec3-296">Streaming</span></span>  <br/> |<span data-ttu-id="e5ec3-297">[ConnectionTimeout](https://msdn.microsoft.com/library/14da68a0-bcca-4281-a774-47644baa4ee9%28Office.15%29.aspx)元素</span><span class="sxs-lookup"><span data-stu-id="e5ec3-297">[ConnectionTimeout](https://msdn.microsoft.com/library/14da68a0-bcca-4281-a774-47644baa4ee9%28Office.15%29.aspx) element</span></span>  <br/> | <span data-ttu-id="e5ec3-298">[StreamingSubscriptionConnection](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.streamingsubscriptionconnection%28v=exchg.80%29.aspx)构造函数的*生存期*参数</span><span class="sxs-lookup"><span data-stu-id="e5ec3-298">*lifetime*  parameter of the [StreamingSubscriptionConnection](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.streamingsubscriptionconnection%28v=exchg.80%29.aspx) constructor</span></span>  <br/> |<span data-ttu-id="e5ec3-299">对于 EWS 托管 API，在超时值过期后，将引发[OnDisconnect](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.ondisconnect%28v=exchg.80%29.aspx)事件。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-299">For the EWS Managed API, after the timeout value elapses, the [OnDisconnect](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.ondisconnect%28v=exchg.80%29.aspx) event is raised.</span></span> <span data-ttu-id="e5ec3-300">如果未调用[StreamingSubscriptionConnection](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.open%28v=exchg.80%29.aspx)方法，则关闭该连接。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-300">If the [StreamingSubscriptionConnection.Open](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.open%28v=exchg.80%29.aspx) method is not called, the connection is closed.</span></span>  <br/> <span data-ttu-id="e5ec3-301">对于 EWS，在超时值过期后， [GetUserConfigurationResponse](https://msdn.microsoft.com/library/5e418c91-c836-4de0-a80d-f0dad0c684d7%28Office.15%29.aspx)消息将返回[ConnectionStatus](https://msdn.microsoft.com/library/4300f9d6-8bf9-48c2-9f07-d80197864e17%28Office.15%29.aspx)的关闭值。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-301">For EWS, after the timeout value elapses, the [GetUserConfigurationResponse](https://msdn.microsoft.com/library/5e418c91-c836-4de0-a80d-f0dad0c684d7%28Office.15%29.aspx) message returns a [ConnectionStatus](https://msdn.microsoft.com/library/4300f9d6-8bf9-48c2-9f07-d80197864e17%28Office.15%29.aspx) value of Closed.</span></span>  <br/> |
|<span data-ttu-id="e5ec3-302">超类</span><span class="sxs-lookup"><span data-stu-id="e5ec3-302">Pull</span></span>  <br/> |<span data-ttu-id="e5ec3-303">[Timeout](https://msdn.microsoft.com/library/c2e1ca5a-6667-4f6f-aac4-89de33bddc54%28Office.15%29.aspx)元素</span><span class="sxs-lookup"><span data-stu-id="e5ec3-303">[Timeout](https://msdn.microsoft.com/library/c2e1ca5a-6667-4f6f-aac4-89de33bddc54%28Office.15%29.aspx) element</span></span>  <br/> | <span data-ttu-id="e5ec3-304">[SubscribeToPullNotification](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotifications%28v=exchg.80%29.aspx)方法的*timeout*参数</span><span class="sxs-lookup"><span data-stu-id="e5ec3-304">*timeout*  parameter of the [SubscribeToPullNotification](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotifications%28v=exchg.80%29.aspx) method</span></span>  <br/> |<span data-ttu-id="e5ec3-305">超时值过期后，服务器将删除订阅。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-305">After the timeout value elapses, the server deletes the subscription.</span></span>  <br/> |
|<span data-ttu-id="e5ec3-306">子类</span><span class="sxs-lookup"><span data-stu-id="e5ec3-306">Push</span></span>  <br/> |<span data-ttu-id="e5ec3-307">[StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx)元素</span><span class="sxs-lookup"><span data-stu-id="e5ec3-307">[StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx) element</span></span>  <br/> | <span data-ttu-id="e5ec3-308">[SubscribeToPushNotification](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotifications%28v=exchg.80%29.aspx)方法的*frequency*参数</span><span class="sxs-lookup"><span data-stu-id="e5ec3-308">*frequency*  parameter of the [SubscribeToPushNotification](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotifications%28v=exchg.80%29.aspx) method</span></span>  <br/> |<span data-ttu-id="e5ec3-309">如果服务器未收到对推送通知或状态 ping 的响应，则它会在停止发送通知之前多次重试发送通知。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-309">If the server does not receive a response to a push notification or status ping, it retries sending the notification several times before it stops sending the notifications.</span></span> <span data-ttu-id="e5ec3-310">有关详细信息，请参阅[StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx)。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-310">For more information, see [StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx).</span></span>  <br/> |
   
## <a name="can-i-limit-subscriptions"></a><span data-ttu-id="e5ec3-311">我可以限制订阅吗？</span><span class="sxs-lookup"><span data-stu-id="e5ec3-311">Can I limit subscriptions?</span></span>
<span data-ttu-id="e5ec3-312"><a name="bk_limitsubs"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-312"><a name="bk_limitsubs"> </a></span></span>

<span data-ttu-id="e5ec3-313">在本地部署中，可以使用限制策略的[EwsMaxSubscriptions 限制参数](ews-throttling-in-exchange.md)限制每个用户的订阅数。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-313">In an on-premises deployment, you can limit the number of subscriptions per user with the [EwsMaxSubscriptions throttling parameter](ews-throttling-in-exchange.md) of the throttling policy.</span></span> <span data-ttu-id="e5ec3-314">该策略可应用于所有用户或仅适用于特定用户。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-314">That policy can be applied to all users or just specific users.</span></span> <span data-ttu-id="e5ec3-315">Exchange Online 的**EwsMaxSubscriptions**限制策略不可配置。</span><span class="sxs-lookup"><span data-stu-id="e5ec3-315">The **EwsMaxSubscriptions** throttling policy is not configurable for Exchange Online.</span></span> 
  
## <a name="in-this-section"></a><span data-ttu-id="e5ec3-316">本节内容</span><span class="sxs-lookup"><span data-stu-id="e5ec3-316">In this section</span></span>
<span data-ttu-id="e5ec3-317"><a name="bk_limitsubs"> </a></span><span class="sxs-lookup"><span data-stu-id="e5ec3-317"><a name="bk_limitsubs"> </a></span></span>

- [<span data-ttu-id="e5ec3-318">在 Exchange 中使用 EWS 流式处理有关邮箱事件的通知</span><span class="sxs-lookup"><span data-stu-id="e5ec3-318">Stream notifications about mailbox events by using EWS in Exchange</span></span>](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)
    
- [<span data-ttu-id="e5ec3-319">使用 Exchange 中的 EWS 获取有关邮箱事件的通知</span><span class="sxs-lookup"><span data-stu-id="e5ec3-319">Pull notifications about mailbox events by using EWS in Exchange</span></span>](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)
    
- [<span data-ttu-id="e5ec3-320">维护 Exchange 中的一组订阅和邮箱服务器之间的相关性</span><span class="sxs-lookup"><span data-stu-id="e5ec3-320">Maintain affinity between a group of subscriptions and the Mailbox server in Exchange</span></span>](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md)
    
- [<span data-ttu-id="e5ec3-321">在 Exchange 中处理 EWS 中与通知相关的错误</span><span class="sxs-lookup"><span data-stu-id="e5ec3-321">Handling notification-related errors in EWS in Exchange</span></span>](handling-notification-related-errors-in-ews-in-exchange.md)
    
## <a name="see-also"></a><span data-ttu-id="e5ec3-322">另请参阅</span><span class="sxs-lookup"><span data-stu-id="e5ec3-322">See also</span></span>

- [<span data-ttu-id="e5ec3-323">开发 Exchange Web 服务客户端</span><span class="sxs-lookup"><span data-stu-id="e5ec3-323">Develop web service clients for Exchange</span></span>](develop-web-service-clients-for-exchange.md)
- [<span data-ttu-id="e5ec3-324">Exchange web 服务引用</span><span class="sxs-lookup"><span data-stu-id="e5ec3-324">Web services reference for Exchange</span></span>](../web-service-reference/web-services-reference-for-exchange.md)
- [<span data-ttu-id="e5ec3-325">Start using web services in Exchange</span><span class="sxs-lookup"><span data-stu-id="e5ec3-325">Start using web services in Exchange</span></span>](start-using-web-services-in-exchange.md)
- [<span data-ttu-id="e5ec3-326">邮箱同步和交换中的 EWS</span><span class="sxs-lookup"><span data-stu-id="e5ec3-326">Mailbox synchronization and EWS in Exchange</span></span>](mailbox-synchronization-and-ews-in-exchange.md)
- [<span data-ttu-id="e5ec3-327">推送通知示例应用程序</span><span class="sxs-lookup"><span data-stu-id="e5ec3-327">Push Notification Sample Application</span></span>](https://msdn.microsoft.com/library/db1f8523-fa44-483f-bdb6-ab5939b52eee%28Office.15%29.aspx)
    

