---
title: Exchange 中的通知订阅、邮箱事件和 EWS
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.assetid: 76136f28-0dad-4ecc-9dd7-a45a1861e4b0
description: 查找更多关于在 Exchange中的 EWS 中的通知订阅和邮箱时间的信息。
localization_priority: Priority
ms.openlocfilehash: 00a0941e615f35a46bb77c00648b75fcd2a45286
ms.sourcegitcommit: 843a2e030a94b12aec70c553ca4e06e39ac02d82
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/09/2020
ms.locfileid: "49603839"
---
# <a name="notification-subscriptions-mailbox-events-and-ews-in-exchange"></a><span data-ttu-id="3ba8f-103">Exchange 中的通知订阅、邮箱事件和 EWS</span><span class="sxs-lookup"><span data-stu-id="3ba8f-103">Notification subscriptions, mailbox events, and EWS in Exchange</span></span>

<span data-ttu-id="3ba8f-104">查找更多关于在 Exchange中的 EWS 中的通知订阅和邮箱时间的信息。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-104">Find out about notification subscriptions and mailbox event in EWS in Exchange.</span></span>
  
<span data-ttu-id="3ba8f-105">你可以使用 EWS 托管 API 和Exchange Web 服务 (EWS) 订阅，以便当邮箱或邮箱中的一个或多个文件夹中的事件发生时接收通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-105">You can use both the EWS Managed API and Exchange Web Services (EWS) to subscribe to receive notifications when events occur in a mailbox, or in one or more of the folders in a mailbox.</span></span> <span data-ttu-id="3ba8f-106">这些订阅类型可用：流式通知、拉取通知和推送通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-106">Three subscription types are available: streaming notifications, pull notifications, and push notifications.</span></span> <span data-ttu-id="3ba8f-107">每个订阅类型使用不同的技术收取或检索通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-107">Each of these subscription types uses different techniques to receive or retrieve the notifications.</span></span>
  
## <a name="getting-notifications---what-are-my-options"></a><span data-ttu-id="3ba8f-108">获取通知 - 我有哪些选择？</span><span class="sxs-lookup"><span data-stu-id="3ba8f-108">Getting notifications - what are my options?</span></span>
<span data-ttu-id="3ba8f-109"><a name="bk_notiftypes"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-109"><a name="bk_notiftypes"> </a></span></span>

<span data-ttu-id="3ba8f-110">EWS 包含三种订阅类型，它们可以独立工作，通知服务器上的客户端任何发生的改变。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-110">EWS includes three subscription types that work independently to notify the client of changes on the server.</span></span> <span data-ttu-id="3ba8f-111">不管你选择哪种订阅，你将可以访问所有相同的通知事件 - 不同的只是你获取它们的方式。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-111">No matter which subscription type you choose, you'll have access to all the same notification events in the end - it's just a matter of how you get them.</span></span>
  
<span data-ttu-id="3ba8f-112">**表 1. 订阅类型**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-112">**Table 1. Subscription types**</span></span>

|<span data-ttu-id="3ba8f-113">**选项**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-113">**Option**</span></span>|<span data-ttu-id="3ba8f-114">**说明**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-114">**Description**</span></span>|<span data-ttu-id="3ba8f-115">**它适合我吗？**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-115">**Is it right for me?**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="3ba8f-116">流式通知</span><span class="sxs-lookup"><span data-stu-id="3ba8f-116">Streaming notifications</span></span>  <br/> |<span data-ttu-id="3ba8f-117">通过连接由服务器发送的通知，该连接在特定时间内保持开放。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-117">Notifications that are sent by the server through a connection that remains open for a specified period of time.</span></span>  <br/> |<span data-ttu-id="3ba8f-118">流式通知一般适合大多数应用程序。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-118">Streaming notifications are generally recommended for most applications.</span></span> <span data-ttu-id="3ba8f-119">它们类似于拉取和推送通知，并结合了这两种的优点。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-119">They're similar to pull and push notifications, and offer the best of both worlds.</span></span> <span data-ttu-id="3ba8f-120">在你确定了通知订阅后，连接将会保持开放 30 分钟，以允许服务器向客户端推送通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-120">After you establish your notification subscription, the connection remains open for up to 30 minutes to allow the server to push notifications back to the client.</span></span> <span data-ttu-id="3ba8f-121">不像拉取订阅那样需要请求更新，也不需要像推送订阅那样创建 Web 服务侦听器应用。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-121">No need to request updates, like you would with a pull subscription, and you don't have to create a web service listener application like you would with a push subscription.</span></span>  <br/> |
|<span data-ttu-id="3ba8f-122">拉取通知</span><span class="sxs-lookup"><span data-stu-id="3ba8f-122">Pull notifications</span></span>  <br/> |<span data-ttu-id="3ba8f-123">由客户端请求（拉）的通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-123">Notifications that are requested (or pulled) by the client.</span></span>  <br/> |<span data-ttu-id="3ba8f-124">拉取通知一般来说适用于大多数松散的客户端，即它们并没有持续地连接到网络。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-124">Pull notifications are generally most appropriate for loosely coupled clients, where the client is not reliably connected to the network.</span></span> <span data-ttu-id="3ba8f-125">拉取通知可能在客户端和服务器之间创造过多的流量，因为客户端会向服务器频繁地请求检索通知，且不是所有请求都能取回通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-125">Pull notifications can create excess traffic between the client and the server because the client is sending frequent requests to the server to retrieve notifications, and not all requests result in notifications retrieved.</span></span>  <br/> |
|<span data-ttu-id="3ba8f-126">推送通知</span><span class="sxs-lookup"><span data-stu-id="3ba8f-126">Push notifications</span></span>  <br/> |<span data-ttu-id="3ba8f-127">由服务器通过回拨地址向客户端 Web 服务发送的通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-127">Notifications that are sent (or pushed) by the server to a client-side web service via a callback address.</span></span>  <br/> |<span data-ttu-id="3ba8f-128">一般来说，推送通知比拉取通知延迟较小，且适合重度用户，即有稳定访问权限且 IP 可查址的用户。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-128">Generally, push notifications provide for smaller notification latency than pull notifications and are suited for tightly coupled clients to which the server has reliable access and the client is IP addressable.</span></span> <span data-ttu-id="3ba8f-129">但是，自从流式通知于 2010 年来到 Exchange 后，推送通知就失去了宠爱。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-129">However, push notifications have fallen out of favor since the advent of streaming notifications in Exchange 2010.</span></span> <span data-ttu-id="3ba8f-130">如果可能的话，我们建议你以后使用流式通知而不是推送通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-130">If possible, we recommend that you use streaming notifications instead of push notifications going forward.</span></span> <span data-ttu-id="3ba8f-131">推送通知要求你写一个侦听器应用，也就是通知被推到的地方。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-131">Push notifications require that you write a listener application, which is where the notifications are pushed to.</span></span> <span data-ttu-id="3ba8f-132">与拉取通知相比，这有一个小的好处，就是它可以减少线路流量，但是由于要求额外的应用，它也增加了开销。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-132">This has a slight benefit over pull notifications in that it reduces wire traffic, but it adds overhead by requiring a separate application.</span></span>  <br/> |
   
## <a name="what-ews-events-can-i-subscribe-to"></a><span data-ttu-id="3ba8f-133">我可以订阅什么 EWS 事件？</span><span class="sxs-lookup"><span data-stu-id="3ba8f-133">What EWS events can I subscribe to?</span></span>
<span data-ttu-id="3ba8f-134"><a name="bk_eventtypes"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-134"><a name="bk_eventtypes"> </a></span></span>

<span data-ttu-id="3ba8f-135">客户端订阅的 EWS 事件类型由 EWS 托管 API 的 [EventType](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx) 枚举或 EWS 的 [EventType](https://msdn.microsoft.com/library/04b70f9e-c226-4130-958e-0db0275cf58b%28Office.15%29.aspx)元素定义。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-135">The types of EWS events that clients subscribe to are defined by the [EventType](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx) enumeration for the EWS Managed API or the [EventType](https://msdn.microsoft.com/library/04b70f9e-c226-4130-958e-0db0275cf58b%28Office.15%29.aspx) element for EWS.</span></span> <span data-ttu-id="3ba8f-136">以下 EWS 事件可订阅：</span><span class="sxs-lookup"><span data-stu-id="3ba8f-136">The following EWS events are available for subscription:</span></span> 
  
- <span data-ttu-id="3ba8f-137">NewMail - 新邮件抵达收件箱。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-137">NewMail — A new message arrived in the Inbox.</span></span>
    
- <span data-ttu-id="3ba8f-138">Deleted - 邮件从收件箱中硬删除。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-138">Deleted — A message was hard deleted from the Inbox.</span></span> <span data-ttu-id="3ba8f-139">了解更多关于删除项通知，请参阅[在 Exchange 中使用 EWS 删除项](deleting-items-by-using-ews-in-exchange.md) 以及 [在 Exchange 中与 EWS 删除相关的邮箱事件拉取通知](pull-notifications-for-ews-deletion-related-mailbox-events-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-139">To learn more about deleted item notifications, see [Deleting items by using EWS in Exchange](deleting-items-by-using-ews-in-exchange.md) and [Pull notifications for EWS deletion-related mailbox events in Exchange](pull-notifications-for-ews-deletion-related-mailbox-events-in-exchange.md).</span></span>
    
- <span data-ttu-id="3ba8f-140">Modified - 项或文件夹有更改。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-140">Modified — An item or folder was changed.</span></span>
    
- <span data-ttu-id="3ba8f-141">Moved - 项或文件夹移动。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-141">Moved — An item or folder was moved.</span></span> 
    
- <span data-ttu-id="3ba8f-142">Copied - 项或文件夹被复制。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-142">Copied — An item or folder was copied.</span></span>
    
- <span data-ttu-id="3ba8f-143">Created - 项或文件夹被创建。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-143">Created — An item or folder was created.</span></span> 
    
- <span data-ttu-id="3ba8f-144">FreeBusyChanged - 用户的空闲忙碌信息更改。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-144">FreeBusyChanged — A user's free busy information has been changed.</span></span>
    
<span data-ttu-id="3ba8f-145">另一个 EWS 事件类型，状态事件，由 [EventType](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx) 元素定义，但你无需订阅此事件。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-145">Another EWS event type, the Status event, is defined by the [EventType](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.eventtype%28v=exchg.80%29.aspx) element, but you don't subscribe to this event.</span></span> <span data-ttu-id="3ba8f-146">状态事件仅在流式和推送通知中由服务器发送，以检查客户端的状态。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-146">Instead, it's sent by the server to check the status of the client for streaming and push notifications only.</span></span> <span data-ttu-id="3ba8f-147">用户需要响应此事件或用户超时。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-147">The client needs to respond to this event or the client will time out.</span></span> 
  
<span data-ttu-id="3ba8f-148">单一用户操作经常导致多个通知的建立。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-148">A single user action often results in the creation of multiple notifications.</span></span> <span data-ttu-id="3ba8f-149">为阐释这一点，下文的图显示了一些常见的应用场景以及每个场景中创建的通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-149">To illustrate this, the following figure shows some common scenarios and the notifications created for each one.</span></span> <span data-ttu-id="3ba8f-150">用户设置对所收通知有影响，所以此列表不能穷尽所有配置选项和最终通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-150">Client settings have an impact on the notifications received, so this is not an exhaustive list of all the configuration options and resulting notifications.</span></span>
  
<span data-ttu-id="3ba8f-151">**图 1. 通知订阅返回的事件类型**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-151">**Figure 1. Event types returned by notification subscriptions**</span></span>

![此表格显示在常见用户情境下发送的通知，例如收到新的电子邮件、创建新的文件夹、移动某个文件夹等。](media/Exchange2013_Notifications_Events.png)
  
<span data-ttu-id="3ba8f-153">图 1 简化了通知过程。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-153">Figure 1 simplifies the notification process.</span></span> <span data-ttu-id="3ba8f-154">现实中，多个通知（甚至是多个同类型的通知）可以由单一用户操作创建。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-154">In reality, multiple notifications (even multiple notifications of the same type) can be created for a single user action.</span></span> <span data-ttu-id="3ba8f-155">比如，在文件夹移动操作的情况中，三个文件夹事件被创建：一个关于文件夹修改，一个关于旧文件夹，还有一个关于新文件夹。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-155">For example, in the case of a folder move operation, three folder events are created: one for the folder being modified, one for the old parent folder, and one for the new parent folder.</span></span> <span data-ttu-id="3ba8f-156">因为单一操作可以出现多个事件，我们建议你[构建一个几秒长的等待事件到你的同步操作中](mailbox-synchronization-and-ews-in-exchange.md#bk_bestpractices)，这样同步只有在操作完成时才会进行，而不是在操作中多次进行。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-156">Because numerous events can be fired for a single operation, we recommend that you [build a wait time of a few seconds into your synchronization operations](mailbox-synchronization-and-ews-in-exchange.md#bk_bestpractices), so that you only synchronize when the action is complete, instead of partway through the operation.</span></span>
  
<span data-ttu-id="3ba8f-157">另外很重要的是，每个用户选择的配置设置会影响最终创建的通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-157">It's also important to realize that the configuration settings that each user chooses will affect which notifications are created.</span></span> <span data-ttu-id="3ba8f-158">比如，一些用户的空闲忙碌数据是自动更新的，当收到新的会议请求时 FreeBusyChanged 事件就会被创建，这甚至早于他们阅读此请求的时间。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-158">For example, some users' free busy data is updated automatically and the FreeBusyChanged event is created when a new meeting request is received, even before they've read the item.</span></span> <span data-ttu-id="3ba8f-159">对于其他用户来说，空闲忙碌时间、FreeBusyChanged 事件在他们接受会议请求之前都不会更新或创建。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-159">For other users, free busy data isn't updated and the FreeBusyChanged event isn't created until after the meeting has been accepted.</span></span> <span data-ttu-id="3ba8f-160">这些设置可能会对服务器创建的通知产生极大的影响。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-160">These settings can have a considerable impact on the notifications created by the server.</span></span>
  
## <a name="how-do-ews-notifications-work"></a><span data-ttu-id="3ba8f-161">EWS 通知的原理是什么？</span><span class="sxs-lookup"><span data-stu-id="3ba8f-161">How do EWS notifications work?</span></span>
<span data-ttu-id="3ba8f-162"><a name="bk_howwork"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-162"><a name="bk_howwork"> </a></span></span>

<span data-ttu-id="3ba8f-163">EWS 通知以订阅的形式进行。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-163">EWS notifications are handled on a subscription basis.</span></span> <span data-ttu-id="3ba8f-164">通常，每个邮箱一个订阅，在邮箱订阅内你还可以订阅一些或所有文件夹。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-164">Typically there's one subscription per mailbox, and within the mailbox subscription you can subscribe to some or all folders.</span></span> <span data-ttu-id="3ba8f-165">你可以决定订阅什么种类的通知（流式、拉取、推送）以及接收什么种类的事件（NewMail、Created、Deleted、Modified等），然后可以创建订阅。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-165">You decide what kind of notification to subscribe to (streaming, pull, or push) and what kind of events you'd like to receive (NewMail, Created, Deleted, Modified, etc.), and then you create a subscription.</span></span> <span data-ttu-id="3ba8f-166">然后 EWS 事件会非同步地从邮箱服务器发送到客户端。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-166">The EWS events are then sent asynchronously from the mailbox server to the client.</span></span> <span data-ttu-id="3ba8f-167">（历史经验：事件在 Exchange 2007 上是同步的 - 事件在 Exchange 2010 存储在 Client Access 服务器上，但现在已经不是了！）</span><span class="sxs-lookup"><span data-stu-id="3ba8f-167">(History lesson: events are synchronous in Exchange 2007 - and events are stored on the Client Access server in Exchange 2010, but no more!).</span></span>
  
<span data-ttu-id="3ba8f-168">取决于你的订阅类型，通知发送到客户端的方式不一。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-168">Depending on the type of subscription you have, the ways in which the notifications are sent to the client vary.</span></span> <span data-ttu-id="3ba8f-169">本节介绍了每种订阅类型的具体工作原理。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-169">This section describes how each type of subscription works in more detail.</span></span>
  
### <a name="ews-streaming-notifications"></a><span data-ttu-id="3ba8f-170">EWS 流式通知</span><span class="sxs-lookup"><span data-stu-id="3ba8f-170">EWS streaming notifications</span></span>
<span data-ttu-id="3ba8f-171"><a name="bk_streamnotif"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-171"><a name="bk_streamnotif"> </a></span></span>

<span data-ttu-id="3ba8f-172">流式通知依赖于一个在服务器挂起的 get 请求来保持流式订阅连接打开，这样任何在连接活动时发生的事件都会马上流给客户端。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-172">Streaming notifications rely on a hanging get request on the server to keep a streaming subscription connection open, so that any events that occur while the connection is active are streamed to the client immediately.</span></span> <span data-ttu-id="3ba8f-173">多个通知可以在单个连接周期内发送，在至多 30 分钟的间隔期过期前，连接都会保持打开。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-173">Multiple notifications can be sent over the course of a single connection, and the connection stays open until the interval expires, or for a maximum of 30 minutes.</span></span> <span data-ttu-id="3ba8f-174">连接过期后，客户端再次发送 get 请求。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-174">After the connection expires, the client sends the hanging get request again.</span></span> <span data-ttu-id="3ba8f-175">图 2 显示了流式订阅和流式通知工作的原理。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-175">Figure 2 shows how streaming subscriptions and streaming notifications work.</span></span>
  
<span data-ttu-id="3ba8f-176">**图 2. 流式通知概述**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-176">**Figure 2. Streaming notification overview**</span></span>

![此插图显示流通知的工作原理。设置流通知的步骤：1. 订阅；2. 打开连接；3. 等待事件；4. 接收事件，重复 3 和 4；5. 关闭或保留连接；6. 取消订阅或超时。](media/Exchange2013_Notifications_StreamSub.png)
  
<span data-ttu-id="3ba8f-185">更多关于创建流式通知的信息，请参阅[在 Exchange 上使用 EWS 时关于邮箱事件的流式通知](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-185">For information about creating streaming notifications, see [Stream notifications about mailbox events by using EWS in Exchange](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span>
  
### <a name="ews-pull-notifications"></a><span data-ttu-id="3ba8f-186">EWS 拉取通知</span><span class="sxs-lookup"><span data-stu-id="3ba8f-186">EWS pull notifications</span></span>
<span data-ttu-id="3ba8f-187"><a name="bk_pullnotif"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-187"><a name="bk_pullnotif"> </a></span></span>

<span data-ttu-id="3ba8f-188">拉取通知依靠客户端以一定间隔请求客户端管理的通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-188">Pull notifications rely on the client asking for the notifications on an interval that the client manages.</span></span> <span data-ttu-id="3ba8f-189">这可能会在获得 GetEvents 响应时未收到通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-189">This can result in GetEvents responses with no notifications.</span></span> <span data-ttu-id="3ba8f-190">图 3 显示了拉取订阅和拉取通知工作的原理。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-190">Figure 3 shows how pull subscriptions and pull notifications work.</span></span>
  
<span data-ttu-id="3ba8f-191">**图 3. 拉取通知概述**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-191">**Figure 3. Pull notification overview**</span></span>

![此插图显示拉取通知的工作原理。设置拉取通知的步骤：1. 订阅；2. 发送 GetEvents；3. 接收答复，重复 2 和 3；4. 关闭或保留连接；5. 取消订阅或超时。](media/Exchange2013_Notifications_PullSub.png)
  
<span data-ttu-id="3ba8f-199">更多关于创建拉取通知的信息，请参阅[在 Exchange 上使用 EWS 时关于邮箱事件的拉取通知](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-199">For information about creating pull notifications, see [Pull notifications about mailbox events by using EWS in Exchange](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span>
  
### <a name="ews-push-notifications"></a><span data-ttu-id="3ba8f-200">EWS 推送通知</span><span class="sxs-lookup"><span data-stu-id="3ba8f-200">EWS push notifications</span></span>
<span data-ttu-id="3ba8f-201"><a name="bk_pushnotif"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-201"><a name="bk_pushnotif"> </a></span></span>

<span data-ttu-id="3ba8f-202">推送通知依靠服务区将通知推回到客户端。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-202">Push notifications rely on the server pushing notifications back to the client.</span></span> <span data-ttu-id="3ba8f-203">只有在有通知时才会有流量。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-203">There's only traffic if there's a notification.</span></span> <span data-ttu-id="3ba8f-204">图 4 显示了推送订阅和推送通知工作的原理。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-204">Figure 4 shows how push subscriptions and push notifications work.</span></span>
  
<span data-ttu-id="3ba8f-205">**图 4. 推送通知概述**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-205">**Figure 4. Push notification overview**</span></span>

![此插图显示推送通知的工作原理。设置推送通知的步骤：1. 创建侦听器；2. 订阅；3. 等待事件；4. 接收事件；5. 发送“确定”答复，重复 3、4、和 5；6. 取消订阅或超时。](media/Exchange2013_Notifications_PushSub.png)

<span data-ttu-id="3ba8f-214">如果你在使用 [Exchange 2010 和推送通知](https://msdn.microsoft.com/library/db1f8523-fa44-483f-bdb6-ab5939b52eee%28Office.15%29.aspx)，请考虑升级你的应用[使用流式通知](https://code.msdn.microsoft.com/exchange/Exchange-2013-Set-push-82738cc5)，这样你就不用一个额外的应用程序来收取事件了。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-214">If you are using [push notifications with Exchange 2010](https://msdn.microsoft.com/library/db1f8523-fa44-483f-bdb6-ab5939b52eee%28Office.15%29.aspx), consider upgrading your application to [use streaming notifications](https://code.msdn.microsoft.com/exchange/Exchange-2013-Set-push-82738cc5), so that you don't need a separate application to receive the events.</span></span>

  
## <a name="how-do-i-subscribe-to-notifications"></a><span data-ttu-id="3ba8f-215">我如何订阅通知？</span><span class="sxs-lookup"><span data-stu-id="3ba8f-215">How do I subscribe to notifications?</span></span>
<span data-ttu-id="3ba8f-216"><a name="bk_notifoperations"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-216"><a name="bk_notifoperations"> </a></span></span>

<span data-ttu-id="3ba8f-217">取决于你想要创建的订阅类型，你有一些订阅通知的选项。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-217">Depending on the type of subscription you'd like to create, you have a number of options to choose from for subscribing to notifications.</span></span>
  
<span data-ttu-id="3ba8f-218">**表 2. 订阅通知的操作和方法**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-218">**Table 2. Operations and methods for subscribing to notifications**</span></span>

|<span data-ttu-id="3ba8f-219">**订阅类型**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-219">**Subscription type**</span></span>|<span data-ttu-id="3ba8f-220">**EWS 操作**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-220">**EWS operation**</span></span>|<span data-ttu-id="3ba8f-221">**EWS 托管 API**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-221">**EWS Managed API methods**</span></span>|<span data-ttu-id="3ba8f-222">**功能**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-222">**What it does**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="3ba8f-223">流式</span><span class="sxs-lookup"><span data-stu-id="3ba8f-223">Streaming</span></span>  <br/> |[<span data-ttu-id="3ba8f-224">订阅操作</span><span class="sxs-lookup"><span data-stu-id="3ba8f-224">Subscribe operation</span></span>](https://msdn.microsoft.com/library/f17c3d08-c79e-41f1-ba31-6e41e7aafd87%28Office.15%29.aspx) <br/> |[<span data-ttu-id="3ba8f-225">ExchangeService.BeginSubscribeToStreamingNotifications 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-225">ExchangeService.BeginSubscribeToStreamingNotifications method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetostreamingnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-226">ExchangeService.BeginSubscribeToStreamingNotificationsOnAllFolders 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-226">ExchangeService.BeginSubscribeToStreamingNotificationsOnAllFolders method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetostreamingnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-227">ExchangeService.SubscribeToStreamingNotificationsOnAllFolders 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-227">ExchangeService.SubscribeToStreamingNotificationsOnAllFolders method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetostreamingnotifications%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="3ba8f-228">创建请求以订阅流式通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-228">Creates a request to subscribe to streaming notifications.</span></span>  <br/> |
|<span data-ttu-id="3ba8f-229">拉取</span><span class="sxs-lookup"><span data-stu-id="3ba8f-229">Pull</span></span>  <br/> |[<span data-ttu-id="3ba8f-230">订阅操作</span><span class="sxs-lookup"><span data-stu-id="3ba8f-230">Subscribe operation</span></span>](https://msdn.microsoft.com/library/f17c3d08-c79e-41f1-ba31-6e41e7aafd87%28Office.15%29.aspx) <br/> |[<span data-ttu-id="3ba8f-231">ExchangeService.BeginSubscribeToPullNotifications 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-231">ExchangeService.BeginSubscribeToPullNotifications method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopullnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-232">ExchangeService.BeginSubscribeToPullNotificationsOnAllFolders 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-232">ExchangeService.BeginSubscribeToPullNotificationsOnAllFolders method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopullnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-233">ExchangeService.SubscribeToPullNotifications 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-233">ExchangeService.SubscribeToPullNotifications method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-234">ExchangeService.SubscribeToPullNotificationsOnAllFolders 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-234">ExchangeService.SubscribeToPullNotificationsOnAllFolders method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="3ba8f-235">创建请求以订阅流式通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-235">Creates a request to subscribe to pull notifications.</span></span>  <br/> |
|<span data-ttu-id="3ba8f-236">推送</span><span class="sxs-lookup"><span data-stu-id="3ba8f-236">Push</span></span>  <br/> |[<span data-ttu-id="3ba8f-237">订阅操作</span><span class="sxs-lookup"><span data-stu-id="3ba8f-237">Subscribe operation</span></span>](https://msdn.microsoft.com/library/f17c3d08-c79e-41f1-ba31-6e41e7aafd87%28Office.15%29.aspx) <br/> |[<span data-ttu-id="3ba8f-238">ExchangeService.BeginSubscribeToPullNotifications 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-238">ExchangeService.BeginSubscribeToPushNotifications overloaded method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopushnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-239">ExchangeService.BeginSubscribeToPushNotificationsOnAllFolders overload 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-239">ExchangeService.BeginSubscribeToPushNotificationsOnAllFolders overload method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.beginsubscribetopushnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-240">ExchangeService.SubscribeToPushNotifications overloaded 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-240">ExchangeService.SubscribeToPushNotifications overloaded method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotifications%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-241">ExchangeService.BeginSubscribeToPushNotificationsOnAllFolders overload 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-241">ExchangeService.SubscribeToPushNotificationsOnAllFolders overloaded method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotificationsonallfolders%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="3ba8f-242">创建请求以订阅推送通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-242">Creates a request to subscribe to push notifications.</span></span>  <br/> |
   
## <a name="how-do-i-get-ews-events"></a><span data-ttu-id="3ba8f-243">如何获取 EWS 事件？</span><span class="sxs-lookup"><span data-stu-id="3ba8f-243">How do I get EWS events?</span></span>
<span data-ttu-id="3ba8f-244"><a name="bk_getevents"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-244"><a name="bk_getevents"> </a></span></span>

<span data-ttu-id="3ba8f-245">创建订阅后，实际事件发送到客户端的方式取决于订阅类型。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-245">After the subscription is created, the way in which the actual events are sent to the client depends on the subscription type.</span></span> 
  
<span data-ttu-id="3ba8f-246">对于流式通知而言，流式订阅连接必须创建，然后订阅会加到连接上。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-246">For streaming notifications, a streaming subscription connection must be created, and then the subscription is added to the connection.</span></span> <span data-ttu-id="3ba8f-247">你可以在[在 Exchange 上使用 EWS 时关于邮箱事件的流式通知](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)中了解更多有关此过程的信息。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-247">You can read more about this process in [Stream notifications about mailbox events by using EWS in Exchange](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span> 
  
<span data-ttu-id="3ba8f-248">对于推送通知而言，订阅对象在订阅创建时初始化，这样你只需调用 **GetEvent** 方法或操作来从服务器检索事件。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-248">For pull notifications, the subscription object was initialized when the subscription was created, so you just have to call the **GetEvent** method or operation to retrieve the events from the server.</span></span> <span data-ttu-id="3ba8f-249">你可以在[在 Exchange 上使用 EWS 时关于邮箱事件的推送通知](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)中了解更多有关信息。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-249">You can read more about this in [Pull notifications about mailbox events by using EWS in Exchange](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md).</span></span> 
  
<span data-ttu-id="3ba8f-250">接下来的表列出了检索事件所需的操作和类。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-250">The following table lists the operations and classes required to retrieve events.</span></span> 
  
<span data-ttu-id="3ba8f-251">**表 3. 创建连接和获取事件的元素和类**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-251">**Table 3. Elements and classes for creating a connection and getting events**</span></span>

|<span data-ttu-id="3ba8f-252">**订阅类型**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-252">**Subscription type**</span></span>|<span data-ttu-id="3ba8f-253">**EWS 操作**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-253">**EWS operation**</span></span>|<span data-ttu-id="3ba8f-254">**EWS 托管 API 方法**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-254">**EWS Managed API method**</span></span>|<span data-ttu-id="3ba8f-255">**功能**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-255">**What it does**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="3ba8f-256">流式</span><span class="sxs-lookup"><span data-stu-id="3ba8f-256">Streaming</span></span>  <br/> |[<span data-ttu-id="3ba8f-257">GetStreamingEvents 操作</span><span class="sxs-lookup"><span data-stu-id="3ba8f-257">GetStreamingEvents operation</span></span>](https://msdn.microsoft.com/library/8da95423-72bc-4034-90a8-162eedcd059b%28Office.15%29.aspx) <br/> |[<span data-ttu-id="3ba8f-258">StreamingSubscriptionConnection.AddSubscription 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-258">StreamingSubscriptionConnection.AddSubscription method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.addsubscription%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="3ba8f-259">在服务器上创建一个挂起的 get 请求，当事件发生时，该请求会被响应。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-259">Creates a hanging get request on the server, which is responded to when events occur.</span></span>  <br/> |
|<span data-ttu-id="3ba8f-260">拉取</span><span class="sxs-lookup"><span data-stu-id="3ba8f-260">Pull</span></span>  <br/> |[<span data-ttu-id="3ba8f-261">GetEvents 操作</span><span class="sxs-lookup"><span data-stu-id="3ba8f-261">GetEvents operation</span></span>](https://msdn.microsoft.com/library/f268efe5-9a1a-41a2-b6a6-51fcde7720a1%28Office.15%29.aspx) <br/> |[<span data-ttu-id="3ba8f-262">PullSubscription.GetEvents 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-262">PullSubscription.GetEvents method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.pullsubscription.getevents%28v=exchg.80%29.aspx) <br/> |<span data-ttu-id="3ba8f-263">从服务器获取拉取通知事件。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-263">Gets pull notification events from the server.</span></span>  <br/> |
|<span data-ttu-id="3ba8f-264">推送</span><span class="sxs-lookup"><span data-stu-id="3ba8f-264">Push</span></span>  <br/> |<span data-ttu-id="3ba8f-265">不适用。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-265">Not applicable.</span></span>  <br/> |<span data-ttu-id="3ba8f-266">不适用。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-266">Not applicable.</span></span>  <br/> |<span data-ttu-id="3ba8f-267">推送通知自动发送到 Web 服务倾听器（订阅请求中指定的回拨 URL）。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-267">Push notifications are automatically sent to the web service listener (the callback URL specified in the subscription request).</span></span> <span data-ttu-id="3ba8f-268">无额外的方法或操作需要被调用。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-268">No additional methods or operations need to be called.</span></span>  <br/> |
   
## <a name="how-do-i-unsubscribe-to-notifications"></a><span data-ttu-id="3ba8f-269">我如何取消订阅通知？</span><span class="sxs-lookup"><span data-stu-id="3ba8f-269">How do I unsubscribe to notifications?</span></span>
<span data-ttu-id="3ba8f-270"><a name="bk_notifunsubscribe"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-270"><a name="bk_notifunsubscribe"> </a></span></span>

<span data-ttu-id="3ba8f-271">下列表格列出了你取消退订每一种订阅的方法。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-271">The following table lists the ways in which you can unsubscribe to each type of subscription.</span></span>
  
<span data-ttu-id="3ba8f-272">**表 4. 取消订阅通知的操作和方法**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-272">**Table 4. Operations and methods for unsubscribing to notifications**</span></span>

|<span data-ttu-id="3ba8f-273">**订阅类型**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-273">**Subscription type**</span></span>|<span data-ttu-id="3ba8f-274">**EWS**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-274">**EWS**</span></span>|<span data-ttu-id="3ba8f-275">**EWS 托管 API**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-275">**EWS Managed API**</span></span>||
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="3ba8f-276">流式</span><span class="sxs-lookup"><span data-stu-id="3ba8f-276">Streaming</span></span>  <br/> |[<span data-ttu-id="3ba8f-277">Unsubscribe 操作</span><span class="sxs-lookup"><span data-stu-id="3ba8f-277">Unsubscribe operation</span></span>](https://msdn.microsoft.com/library/994a9d2b-1501-4804-90f0-12bd914496ec%28Office.15%29.aspx) <br/> |[<span data-ttu-id="3ba8f-278">StreamingSubscription.BeginUnsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-278">StreamingSubscription.BeginUnsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscription.beginunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-279">StreamingSubscription.EndUnsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-279">StreamingSubscription.EndUnsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscription.endunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-280">StreamingSubscription.Unsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-280">StreamingSubscription.Unsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscription.unsubscribe%28v=exchg.80%29.aspx) <br/> ||
|<span data-ttu-id="3ba8f-281">拉取</span><span class="sxs-lookup"><span data-stu-id="3ba8f-281">Pull</span></span>  <br/> |[<span data-ttu-id="3ba8f-282">Unsubscribe 操作</span><span class="sxs-lookup"><span data-stu-id="3ba8f-282">Unsubscribe operation</span></span>](https://msdn.microsoft.com/library/994a9d2b-1501-4804-90f0-12bd914496ec%28Office.15%29.aspx) <br/> |[<span data-ttu-id="3ba8f-283">PullSubscription.BeginUnsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-283">PullSubscription.BeginUnsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.pullsubscription.beginunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-284">PullSubscription.EndUnsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-284">PullSubscription.EndUnsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.pullsubscription.endunsubscribe%28v=exchg.80%29.aspx) <br/> [<span data-ttu-id="3ba8f-285">PullSubscription.Unsubscribe 方法</span><span class="sxs-lookup"><span data-stu-id="3ba8f-285">PullSubscription.Unsubscribe method</span></span>](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.pullsubscription.unsubscribe%28v=exchg.80%29.aspx) <br/> ||
|<span data-ttu-id="3ba8f-286">推送</span><span class="sxs-lookup"><span data-stu-id="3ba8f-286">Push</span></span>  <br/> |<span data-ttu-id="3ba8f-287">在 [SendNotificationResponseMessage](https://msdn.microsoft.com/library/2c6d681b-67ac-4331-bc6b-a2e709b638e3%28Office.15%29.aspx) 的元素 [StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx) 中返回 **Unsubscribe**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-287">Return **Unsubscribe** in the [StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx) element of the [SendNotificationResponseMessage](https://msdn.microsoft.com/library/2c6d681b-67ac-4331-bc6b-a2e709b638e3%28Office.15%29.aspx)</span></span> <br/> |<span data-ttu-id="3ba8f-288">不适用</span><span class="sxs-lookup"><span data-stu-id="3ba8f-288">Not applicable.</span></span> <span data-ttu-id="3ba8f-289">让订阅超时。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-289">Let the subscription time out instead.</span></span>  <br/> ||
   
<span data-ttu-id="3ba8f-290">或者，你可以让每个订阅超时。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-290">Alternatively, you can let each of the subscriptions time out.</span></span> 
  
<span data-ttu-id="3ba8f-291">**表 5. 订阅超时**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-291">**Table 5. Subscription time-outs**</span></span>

|<span data-ttu-id="3ba8f-292">**订阅类型**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-292">**Subscription type**</span></span>|<span data-ttu-id="3ba8f-293">**EWS 中的超时值**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-293">**Timeout value in EWS**</span></span>|<span data-ttu-id="3ba8f-294">**EWS 托管 API 中的超时值**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-294">**Timeout value in the EWS Managed API**</span></span>|<span data-ttu-id="3ba8f-295">**处理超时**</span><span class="sxs-lookup"><span data-stu-id="3ba8f-295">**Timeout handling**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="3ba8f-296">流式</span><span class="sxs-lookup"><span data-stu-id="3ba8f-296">Streaming</span></span>  <br/> |<span data-ttu-id="3ba8f-297">[ConnectionTimeout](https://msdn.microsoft.com/library/14da68a0-bcca-4281-a774-47644baa4ee9%28Office.15%29.aspx) 元素</span><span class="sxs-lookup"><span data-stu-id="3ba8f-297">[ConnectionTimeout](https://msdn.microsoft.com/library/14da68a0-bcca-4281-a774-47644baa4ee9%28Office.15%29.aspx) element</span></span>  <br/> | <span data-ttu-id="3ba8f-298">[StreamingSubscriptionConnection](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.streamingsubscriptionconnection%28v=exchg.80%29.aspx)构造函数的 *生存期*</span><span class="sxs-lookup"><span data-stu-id="3ba8f-298">*lifetime*  parameter of the [StreamingSubscriptionConnection](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.streamingsubscriptionconnection%28v=exchg.80%29.aspx) constructor</span></span>  <br/> |<span data-ttu-id="3ba8f-299">对于 EWS 托管 API，超时值走完后，会引发 [OnDisconnect](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.ondisconnect%28v=exchg.80%29.aspx) 事件。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-299">For the EWS Managed API, after the timeout value elapses, the [OnDisconnect](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.ondisconnect%28v=exchg.80%29.aspx) event is raised.</span></span> <span data-ttu-id="3ba8f-300">如果 [StreamingSubscriptionConnection.Open](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.open%28v=exchg.80%29.aspx) 方法未被调用，连接将关闭。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-300">If the [StreamingSubscriptionConnection.Open](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.streamingsubscriptionconnection.open%28v=exchg.80%29.aspx) method is not called, the connection is closed.</span></span>  <br/> <span data-ttu-id="3ba8f-301">对于 EWS，超时值走完后，[GetUserConfigurationResponse](https://msdn.microsoft.com/library/5e418c91-c836-4de0-a80d-f0dad0c684d7%28Office.15%29.aspx) 消息会返回一个 [ConnectionStatus](https://msdn.microsoft.com/library/4300f9d6-8bf9-48c2-9f07-d80197864e17%28Office.15%29.aspx)的关闭值。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-301">For EWS, after the timeout value elapses, the [GetUserConfigurationResponse](https://msdn.microsoft.com/library/5e418c91-c836-4de0-a80d-f0dad0c684d7%28Office.15%29.aspx) message returns a [ConnectionStatus](https://msdn.microsoft.com/library/4300f9d6-8bf9-48c2-9f07-d80197864e17%28Office.15%29.aspx) value of Closed.</span></span>  <br/> |
|<span data-ttu-id="3ba8f-302">拉取</span><span class="sxs-lookup"><span data-stu-id="3ba8f-302">Pull</span></span>  <br/> |<span data-ttu-id="3ba8f-303">[超时](https://msdn.microsoft.com/library/c2e1ca5a-6667-4f6f-aac4-89de33bddc54%28Office.15%29.aspx)元素</span><span class="sxs-lookup"><span data-stu-id="3ba8f-303">[Timeout](https://msdn.microsoft.com/library/c2e1ca5a-6667-4f6f-aac4-89de33bddc54%28Office.15%29.aspx) element</span></span>  <br/> | <span data-ttu-id="3ba8f-304">[SubscribeToPullNotification](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotifications%28v=exchg.80%29.aspx) 方法的 *超时* 参数</span><span class="sxs-lookup"><span data-stu-id="3ba8f-304">*timeout*  parameter of the [SubscribeToPullNotification](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopullnotifications%28v=exchg.80%29.aspx) method</span></span>  <br/> |<span data-ttu-id="3ba8f-305">超时值走完后，服务器会删除订阅。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-305">After the timeout value elapses, the server deletes the subscription.</span></span>  <br/> |
|<span data-ttu-id="3ba8f-306">推送</span><span class="sxs-lookup"><span data-stu-id="3ba8f-306">Push</span></span>  <br/> |<span data-ttu-id="3ba8f-307">[StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx) 元素</span><span class="sxs-lookup"><span data-stu-id="3ba8f-307">[StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx) element</span></span>  <br/> | <span data-ttu-id="3ba8f-308">[SubscribeToPushNotification](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotifications%28v=exchg.80%29.aspx) 方法的 *频率* 参数</span><span class="sxs-lookup"><span data-stu-id="3ba8f-308">*frequency*  parameter of the [SubscribeToPushNotification](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.exchangeservice.subscribetopushnotifications%28v=exchg.80%29.aspx) method</span></span>  <br/> |<span data-ttu-id="3ba8f-309">如果服务器没有收到对推送通知或状态 ping 的响应，它会重新尝试发送通知几次，然后才停止发送通知。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-309">If the server does not receive a response to a push notification or status ping, it retries sending the notification several times before it stops sending the notifications.</span></span> <span data-ttu-id="3ba8f-310">有关详细信息，请参阅[StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx)</span><span class="sxs-lookup"><span data-stu-id="3ba8f-310">For more information, see [StatusFrequency](https://msdn.microsoft.com/library/917474e2-a426-4166-b825-53783a41dad4%28Office.15%29.aspx).</span></span>  <br/> |
   
## <a name="can-i-limit-subscriptions"></a><span data-ttu-id="3ba8f-311">我可以限制订阅吗？</span><span class="sxs-lookup"><span data-stu-id="3ba8f-311">Can I limit subscriptions?</span></span>
<span data-ttu-id="3ba8f-312"><a name="bk_limitsubs"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-312"><a name="bk_limitsubs"> </a></span></span>

<span data-ttu-id="3ba8f-313">在本地部署中，你可以用[EwsMaxSubscriptions 限制参数](ews-throttling-in-exchange.md)限制每个用户的订阅数量限制。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-313">In an on-premises deployment, you can limit the number of subscriptions per user with the [EwsMaxSubscriptions throttling parameter](ews-throttling-in-exchange.md) of the throttling policy.</span></span> <span data-ttu-id="3ba8f-314">该策略可以应用到全部用户或仅具体用户。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-314">That policy can be applied to all users or just specific users.</span></span> <span data-ttu-id="3ba8f-315">**EwsMaxSubscriptions** 限制策略对 Exchange Online 不可配置。</span><span class="sxs-lookup"><span data-stu-id="3ba8f-315">The **EwsMaxSubscriptions** throttling policy is not configurable for Exchange Online.</span></span> 
  
## <a name="in-this-section"></a><span data-ttu-id="3ba8f-316">本节内容</span><span class="sxs-lookup"><span data-stu-id="3ba8f-316">In this section</span></span>
<span data-ttu-id="3ba8f-317"><a name="bk_limitsubs"> </a></span><span class="sxs-lookup"><span data-stu-id="3ba8f-317"><a name="bk_limitsubs"> </a></span></span>

- [<span data-ttu-id="3ba8f-318">在 Exchange 上使用 EWS 时关于邮箱事件的流式通知</span><span class="sxs-lookup"><span data-stu-id="3ba8f-318">Stream notifications about mailbox events by using EWS in Exchange</span></span>](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)
    
- [<span data-ttu-id="3ba8f-319">在 Exchange 上使用 EWS 时关于邮箱事件的拉取通知</span><span class="sxs-lookup"><span data-stu-id="3ba8f-319">Pull notifications about mailbox events by using EWS in Exchange</span></span>](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)
    
- [<span data-ttu-id="3ba8f-320">在 Exchange 中保持一组订阅和邮箱服务器之间的相关性</span><span class="sxs-lookup"><span data-stu-id="3ba8f-320">Maintain affinity between a group of subscriptions and the Mailbox server in Exchange</span></span>](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md)
    
- [<span data-ttu-id="3ba8f-321">在 Exchange 中使用 EWS 时处理通知相关的错误</span><span class="sxs-lookup"><span data-stu-id="3ba8f-321">Handling notification-related errors in EWS in Exchange</span></span>](handling-notification-related-errors-in-ews-in-exchange.md)
    
## <a name="see-also"></a><span data-ttu-id="3ba8f-322">另请参阅</span><span class="sxs-lookup"><span data-stu-id="3ba8f-322">See also</span></span>

- [<span data-ttu-id="3ba8f-323">开发 Exchange Web 服务客户端</span><span class="sxs-lookup"><span data-stu-id="3ba8f-323">Develop web service clients for Exchange</span></span>](develop-web-service-clients-for-exchange.md)
- [<span data-ttu-id="3ba8f-324">Exchange Web 服务参考</span><span class="sxs-lookup"><span data-stu-id="3ba8f-324">Web services reference for Exchange</span></span>](../web-service-reference/web-services-reference-for-exchange.md)
- [<span data-ttu-id="3ba8f-325">开始使用 Exchange 中的 Web 服务</span><span class="sxs-lookup"><span data-stu-id="3ba8f-325">Start using web services in Exchange</span></span>](start-using-web-services-in-exchange.md)
- [<span data-ttu-id="3ba8f-326">邮箱同步和 Exchange 中的 EWS</span><span class="sxs-lookup"><span data-stu-id="3ba8f-326">Mailbox synchronization and EWS in Exchange</span></span>](mailbox-synchronization-and-ews-in-exchange.md)
- [<span data-ttu-id="3ba8f-327">推送通知示例应用程序</span><span class="sxs-lookup"><span data-stu-id="3ba8f-327">Push Notification Sample Application</span></span>](https://msdn.microsoft.com/library/db1f8523-fa44-483f-bdb6-ab5939b52eee%28Office.15%29.aspx)
    

