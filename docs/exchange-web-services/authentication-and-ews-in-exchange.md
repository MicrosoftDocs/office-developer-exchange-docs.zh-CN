---
title: 身份验证和 Exchange 中的 EWS
manager: sethgros
ms.date: 03/9/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: 9a83df96-aca0-42b3-b8f5-2b414f0363f1
description: 查找可帮助您选择您的 Exchange 的 EWS 应用程序的正确的身份验证标准的信息。
ms.openlocfilehash: c81b29cbe9aa3c658a8f776876366fd0875b2669
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/25/2018
ms.locfileid: "19752704"
---
# <a name="authentication-and-ews-in-exchange"></a><span data-ttu-id="aee7b-103">身份验证和 Exchange 中的 EWS</span><span class="sxs-lookup"><span data-stu-id="aee7b-103">Authentication and EWS in Exchange</span></span>

<span data-ttu-id="aee7b-104">查找可帮助您选择您的 Exchange 的 EWS 应用程序的正确的身份验证标准的信息。</span><span class="sxs-lookup"><span data-stu-id="aee7b-104">Find information to help you choose the right authentication standard for your EWS application that targets Exchange.</span></span>
  
<span data-ttu-id="aee7b-105">身份验证是 Exchange Web Services (EWS) 应用程序的关键部分。</span><span class="sxs-lookup"><span data-stu-id="aee7b-105">Authentication is a key part of your Exchange Web Services (EWS) application.</span></span> <span data-ttu-id="aee7b-106">Exchange Online、 Exchange Online 作为 Office 365 的一部分和本地版本的开头 Exchange Server 2013 的 Exchange 支持标准 web 身份验证协议，以帮助保护您的应用程序和 Exchange 服务器之间的通信。</span><span class="sxs-lookup"><span data-stu-id="aee7b-106">Exchange Online, Exchange Online as part of Office 365, and on-premises versions of Exchange starting with Exchange Server 2013 support standard web authentication protocols to help secure the communication between your application and the Exchange server.</span></span>
  
<span data-ttu-id="aee7b-107">如果您正在面向 Exchange Online，您选择的身份验证方法必须使用 HTTPS 进行加密的请求和应用程序发送的响应。</span><span class="sxs-lookup"><span data-stu-id="aee7b-107">If you're targeting Exchange Online, the authentication method that you choose must use HTTPS to encrypt the requests and responses that your application sends.</span></span> <span data-ttu-id="aee7b-108">尽管您可以与 Exchange 本地服务器使用 HTTP，我们建议您的应用程序将发送到 EWS 终结点可帮助您的应用程序和 Exchange 服务器之间的安全通信任何请求使用 HTTPS。</span><span class="sxs-lookup"><span data-stu-id="aee7b-108">Although you can use HTTP with Exchange on-premises servers, we recommend that you use HTTPS for any request that your application sends to an EWS endpoint to help secure communication between your application and an Exchange server.</span></span>
  
<span data-ttu-id="aee7b-109">Exchange 提供了您可供选择的以下身份验证选项：</span><span class="sxs-lookup"><span data-stu-id="aee7b-109">Exchange provides the following authentication options for you to choose from:</span></span> 
  
- <span data-ttu-id="aee7b-110">OAuth 2.0 (Exchange Online 仅)</span><span class="sxs-lookup"><span data-stu-id="aee7b-110">OAuth 2.0 (Exchange Online only)</span></span>
    
- <span data-ttu-id="aee7b-111">NTLM （Exchange 内部部署仅）</span><span class="sxs-lookup"><span data-stu-id="aee7b-111">NTLM (Exchange on-premises only)</span></span>
    
- <span data-ttu-id="aee7b-112">Basic （不再推荐）</span><span class="sxs-lookup"><span data-stu-id="aee7b-112">Basic (no longer recommended)</span></span>
    
<span data-ttu-id="aee7b-113">您选择的身份验证方法取决于您的组织，您使用的 Exchange Online 或 Exchange 的本地和您是否有权访问可以发出 OAuth 令牌的第三方提供程序的安全要求。</span><span class="sxs-lookup"><span data-stu-id="aee7b-113">The authentication method that you choose depends on the security requirements of your organization, whether you are using Exchange Online or Exchange on-premises, and whether you have access to a third-party provider that can issue OAuth tokens.</span></span> <span data-ttu-id="aee7b-114">本文提供了将帮助您选择适合您的应用程序的身份验证标准的信息。</span><span class="sxs-lookup"><span data-stu-id="aee7b-114">This article provides information that will help you select the authentication standard that's right for your application.</span></span>
  
## <a name="oauth-authentication"></a><span data-ttu-id="aee7b-115">OAuth 身份验证</span><span class="sxs-lookup"><span data-stu-id="aee7b-115">OAuth authentication</span></span>

<span data-ttu-id="aee7b-116">我们建议所有新应用程序使用此 OAuth 标准能够连接到 Exchange Online 服务。</span><span class="sxs-lookup"><span data-stu-id="aee7b-116">We recommend that all new applications use the OAuth standard to connect to Exchange Online services.</span></span> <span data-ttu-id="aee7b-117">基本身份验证安全性优于值得应用程序中实现 OAuth 所需的其他工作。</span><span class="sxs-lookup"><span data-stu-id="aee7b-117">The advantage in security over basic authentication is worth the additional work required to implement OAuth in your application.</span></span> <span data-ttu-id="aee7b-118">对于该记录，但是，有还应注意的一些缺点。</span><span class="sxs-lookup"><span data-stu-id="aee7b-118">For the record, however, there are also some disadvantages that you should be aware of.</span></span>
  
<span data-ttu-id="aee7b-119">**表 1。使用 OAuth 的优点和缺点**</span><span class="sxs-lookup"><span data-stu-id="aee7b-119">**Table 1. Advantages and disadvantages of using OAuth**</span></span>

|<span data-ttu-id="aee7b-120">**优点**</span><span class="sxs-lookup"><span data-stu-id="aee7b-120">**Advantages**</span></span>|<span data-ttu-id="aee7b-121">**缺点**</span><span class="sxs-lookup"><span data-stu-id="aee7b-121">**Disadvantages**</span></span>|
|:-----|:-----|
| <span data-ttu-id="aee7b-122">OAuth 是行业标准身份验证协议。</span><span class="sxs-lookup"><span data-stu-id="aee7b-122">OAuth is an industry-standard authentication protocol.</span></span><br/><br/><span data-ttu-id="aee7b-123">第三方提供程序管理身份验证。</span><span class="sxs-lookup"><span data-stu-id="aee7b-123">Authentication is managed by a third-party provider.</span></span> <span data-ttu-id="aee7b-124">您的应用程序没有收集和存储 Exchange 凭据。</span><span class="sxs-lookup"><span data-stu-id="aee7b-124">Your application does not have to collect and store the Exchange credentials.</span></span><br/><br/><span data-ttu-id="aee7b-125">更少担心，因为您的应用程序将不透明的令牌仅接收身份验证提供程序;因此，在您的应用程序安全性遭到破坏仅可以公开令牌，而不是用户的 Exchange 凭据。</span><span class="sxs-lookup"><span data-stu-id="aee7b-125">Fewer worries for you, because your application only receives an opaque token from the authentication provider; therefore, a security breach in your application can only expose the token, not the user's Exchange credentials.</span></span>  <br/> | <span data-ttu-id="aee7b-126">OAuth 依赖于第三方身份验证提供程序。</span><span class="sxs-lookup"><span data-stu-id="aee7b-126">OAuth relies on a third-party authentication provider.</span></span> <span data-ttu-id="aee7b-127">这可以施加额外的成本，在您的组织或您的客户。</span><span class="sxs-lookup"><span data-stu-id="aee7b-127">This can impose additional costs on your organization or your customers.</span></span><br/><br/><span data-ttu-id="aee7b-128">此 OAuth 标准是更加难以实现比基本身份验证。</span><span class="sxs-lookup"><span data-stu-id="aee7b-128">The OAuth standard is more difficult to implement than basic authentication.</span></span><br/><br/><span data-ttu-id="aee7b-129">若要实现 OAuth，您需要将您的应用程序与身份验证提供程序和 Exchange 服务器集成。</span><span class="sxs-lookup"><span data-stu-id="aee7b-129">To implement OAuth, you need to integrate your application with both the authentication provider and the Exchange server.</span></span>  <br/> |
   
<span data-ttu-id="aee7b-130">为了帮助减少缺点，您可以使用[Microsoft Azure AD 身份验证库](http://msdn.microsoft.com/library/a03f39fa-7ba4-4182-a98e-55562a64b8f3%28Office.15%29.aspx)(ADAL) 为在云中还是内部部署 Active Directory 域服务 (AD DS) 的用户进行身份验证，然后获取访问令牌的保护呼叫到Exchange 服务器。</span><span class="sxs-lookup"><span data-stu-id="aee7b-130">To help minimize the disadvantages, you can use the [Microsoft Azure AD Authentication Library](http://msdn.microsoft.com/library/a03f39fa-7ba4-4182-a98e-55562a64b8f3%28Office.15%29.aspx) (ADAL) to authenticate users to Active Directory Domain Services (AD DS) in the cloud or on-premises and then obtain access tokens for securing calls to an Exchange server.</span></span> <span data-ttu-id="aee7b-131">Exchange Online 要求由受支持的 ADAL; Azure Active Directory 服务颁发的令牌但是，您可以使用任何第三方库。</span><span class="sxs-lookup"><span data-stu-id="aee7b-131">Exchange Online requires tokens issued by the Azure Active Directory service, which is supported by the ADAL; however, you can use any third-party library.</span></span> 
  
<span data-ttu-id="aee7b-132">若要了解有关 EWS 应用程序中使用 OAuth 身份验证的详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="aee7b-132">To learn more about using OAuth authentication in your EWS application, see the following resources:</span></span>
  
- <span data-ttu-id="aee7b-133">[Office 365 试用版](http://office.microsoft.com/compare-office-365-for-business-plans-FX102918419.aspx?CR_CC=200061904&amp;WT.srch=1&amp;WT.mc_ID=PS_bing_O365Comm_office%20365%20trial_Text)，设置要用于测试客户端应用程序的 Exchange 服务器。</span><span class="sxs-lookup"><span data-stu-id="aee7b-133">[Office 365 trial](http://office.microsoft.com/compare-office-365-for-business-plans-FX102918419.aspx?CR_CC=200061904&amp;WT.srch=1&amp;WT.mc_ID=PS_bing_O365Comm_office%20365%20trial_Text), to set up an Exchange server to use to test your client application.</span></span>
    
- [<span data-ttu-id="aee7b-134">适用于.NET的Azure AD身份验证库</span><span class="sxs-lookup"><span data-stu-id="aee7b-134">Azure AD Authentication Library for .NET</span></span>](http://msdn.microsoft.com/library/a03f39fa-7ba4-4182-a98e-55562a64b8f3%28Office.15%29.aspx)
    
- <span data-ttu-id="aee7b-135">[配置 Azure Active Directory](http://msdn.microsoft.com/library/055e1155-2d4d-4c85-b44e-d406872ba595%28Office.15%29.aspx)，若要启用应用程序使用 OAuth 令牌的身份验证。</span><span class="sxs-lookup"><span data-stu-id="aee7b-135">[Configure Azure Active Directory](http://msdn.microsoft.com/library/055e1155-2d4d-4c85-b44e-d406872ba595%28Office.15%29.aspx), to enable your application to use OAuth tokens for authentication.</span></span>
    
- <span data-ttu-id="aee7b-136">查看[Authenticate EWS 应用程序使用 OAuth](how-to-authenticate-an-ews-application-by-using-oauth.md)例如可以研究的代码中的示例代码。</span><span class="sxs-lookup"><span data-stu-id="aee7b-136">Review the sample code in [Authenticate an EWS application by using OAuth](how-to-authenticate-an-ews-application-by-using-oauth.md) for example code that you can study.</span></span> 
    
## <a name="ntlm-authentication"></a><span data-ttu-id="aee7b-137">NTLM 身份验证</span><span class="sxs-lookup"><span data-stu-id="aee7b-137">NTLM authentication</span></span>

<span data-ttu-id="aee7b-138">NTLM 身份验证功能仅适用于 Exchange 内部部署服务器。</span><span class="sxs-lookup"><span data-stu-id="aee7b-138">NTLM authentication is only available for Exchange on-premises servers.</span></span> <span data-ttu-id="aee7b-139">对于运行在企业防火墙内部的应用程序，NTLM 身份验证和.NET Framework 之间的集成提供内置意味着您的应用程序进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="aee7b-139">For applications that run inside the corporate firewall, integration between NTLM authentication and the .NET Framework provides a built-in means to authenticate your application.</span></span> 
  
<span data-ttu-id="aee7b-140">**表 2。使用 NTLM 身份验证的优点和缺点**</span><span class="sxs-lookup"><span data-stu-id="aee7b-140">**Table 2. Advantages and disadvantages of using NTLM authentication**</span></span>

|<span data-ttu-id="aee7b-141">**优点**</span><span class="sxs-lookup"><span data-stu-id="aee7b-141">**Advantages**</span></span>|<span data-ttu-id="aee7b-142">**缺点**</span><span class="sxs-lookup"><span data-stu-id="aee7b-142">**Disadvantages**</span></span>|
|:-----|:-----|
| <span data-ttu-id="aee7b-143">"开"适用于您的 Exchange 服务器。</span><span class="sxs-lookup"><span data-stu-id="aee7b-143">Works "out of the box" with your Exchange server.</span></span> <span data-ttu-id="aee7b-144">您可以使用[Exchange 命令行管理程序 cmdlet](how-to-control-access-to-ews-in-exchange.md)配置 Exchange 服务的访问权限。</span><span class="sxs-lookup"><span data-stu-id="aee7b-144">You can configure access to Exchange services by using an [Exchange Management Shell cmdlet](how-to-control-access-to-ews-in-exchange.md).</span></span><br/><br/><span data-ttu-id="aee7b-145">使用.NET Framework [CredentialCache](http://msdn2.microsoft.com/zh-cn/library/615e0wsd)对象以自动获取用户的凭据。</span><span class="sxs-lookup"><span data-stu-id="aee7b-145">Uses the .NET Framework [CredentialCache](http://msdn2.microsoft.com/zh-cn/library/615e0wsd) object to automatically get the user's credentials.</span></span><br/><br/><span data-ttu-id="aee7b-146">[代码示例都可用](http://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c)，使用了已登录用户的凭据进行身份验证内部部署 Exchange 服务器。</span><span class="sxs-lookup"><span data-stu-id="aee7b-146">[Code samples are available](http://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c) that use the logged on user's credentials for authentication to an on-premises Exchange server.</span></span>  <br/> | <span data-ttu-id="aee7b-147">用户必须登录到要使用 NTLM 身份验证的域。</span><span class="sxs-lookup"><span data-stu-id="aee7b-147">Users must be logged on to a domain to use NTLM authentication.</span></span><br/><br/><span data-ttu-id="aee7b-148">很难访问未与用户的域帐户关联的电子邮件帐户。</span><span class="sxs-lookup"><span data-stu-id="aee7b-148">It can be difficult to access email accounts that are not associated with the user's domain account.</span></span><br/><br/><span data-ttu-id="aee7b-149">服务应用程序必须具有充分利用 NTLM 身份验证的域帐户。</span><span class="sxs-lookup"><span data-stu-id="aee7b-149">Service applications must have a domain account to take advantage of NTLM authentication.</span></span>  <br/> |
   
## <a name="basic-authentication"></a><span data-ttu-id="aee7b-150">基本身份验证</span><span class="sxs-lookup"><span data-stu-id="aee7b-150">Basic authentication</span></span>

<span data-ttu-id="aee7b-151">基本身份验证提供一个很基本级别的客户端应用程序的安全性。</span><span class="sxs-lookup"><span data-stu-id="aee7b-151">Basic authentication provides a, well, basic level of security for your client application.</span></span> <span data-ttu-id="aee7b-152">我们建议所有新应用程序进行身份验证; 使用 NTLM 或 OAuth 协议但是，基本身份验证可以是在某些情况下应用程序的正确选择。</span><span class="sxs-lookup"><span data-stu-id="aee7b-152">We do recommend that all new applications use either NTLM or the OAuth protocol for authentication; however, basic authentication can be the correct choice for your application in some circumstances.</span></span>
  
<span data-ttu-id="aee7b-153">**表 3。使用基本身份验证的优点和缺点**</span><span class="sxs-lookup"><span data-stu-id="aee7b-153">**Table 3. Advantages and disadvantages of using basic authentication**</span></span>

|<span data-ttu-id="aee7b-154">**优点**</span><span class="sxs-lookup"><span data-stu-id="aee7b-154">**Advantages**</span></span>|<span data-ttu-id="aee7b-155">**缺点**</span><span class="sxs-lookup"><span data-stu-id="aee7b-155">**Disadvantages**</span></span>|
|:-----|:-----|
| <span data-ttu-id="aee7b-156">"开"适用于您的 Exchange 服务器。</span><span class="sxs-lookup"><span data-stu-id="aee7b-156">Works "out of the box" with your Exchange server.</span></span> <span data-ttu-id="aee7b-157">您可以使用[Exchange 命令行管理程序 cmdlet](how-to-control-access-to-ews-in-exchange.md)配置 Exchange 服务的访问权限。</span><span class="sxs-lookup"><span data-stu-id="aee7b-157">You can configure access to Exchange services by using an [Exchange Management Shell cmdlet](how-to-control-access-to-ews-in-exchange.md).</span></span><br/><br/><span data-ttu-id="aee7b-158">Windows 应用程序可以使用登录的用户的默认凭据。</span><span class="sxs-lookup"><span data-stu-id="aee7b-158">Windows applications can use the logged on user's default credentials.</span></span><br/><br/><span data-ttu-id="aee7b-159">多个[代码示例可](http://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c)向您演示如何调用 EWS 使用基本身份验证。</span><span class="sxs-lookup"><span data-stu-id="aee7b-159">Many [code samples are available](http://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c) that show you how to call EWS using basic authentication.</span></span>  <br/> | <span data-ttu-id="aee7b-160">需要您的应用程序，以收集和存储用户的凭据。</span><span class="sxs-lookup"><span data-stu-id="aee7b-160">Requires your application to collect and store the user's credentials.</span></span><br/><br/><span data-ttu-id="aee7b-161">您必须关闭所有用户使用基本身份验证的 NTLM 身份验证。</span><span class="sxs-lookup"><span data-stu-id="aee7b-161">You have to turn off NTLM authentication for all users to use basic authentication.</span></span><br/><br/><span data-ttu-id="aee7b-162">如果您的应用程序中发生安全性遭到破坏，它可以公开用户的电子邮件地址和密码攻击者。</span><span class="sxs-lookup"><span data-stu-id="aee7b-162">If a security breach occurs in your application, it can expose the user's email address and password to the attacker.</span></span>  <br/> |
   
<span data-ttu-id="aee7b-163">您需要确定基本身份验证是否符合您的组织和客户的安全要求。</span><span class="sxs-lookup"><span data-stu-id="aee7b-163">You need to decide if basic authentication meets the security requirements of your organization and customers.</span></span> <span data-ttu-id="aee7b-164">基本身份验证可以正确的选择，如果您想要避免广泛安装任务，例如对于简单的测试或演示应用程序。</span><span class="sxs-lookup"><span data-stu-id="aee7b-164">Basic authentication can be the right choice if you want to avoid extensive setup tasks, for example for simple test or demonstration applications.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="aee7b-165">另请参阅</span><span class="sxs-lookup"><span data-stu-id="aee7b-165">See also</span></span>

- [<span data-ttu-id="aee7b-166">Start using web services in Exchange</span><span class="sxs-lookup"><span data-stu-id="aee7b-166">Start using web services in Exchange</span></span>](start-using-web-services-in-exchange.md)   
- [<span data-ttu-id="aee7b-167">单一登录添加到 Web 应用程序使用 Microsoft Azure AD</span><span class="sxs-lookup"><span data-stu-id="aee7b-167">Adding Sign-On to Your Web Application Using Microsoft Azure AD</span></span>](http://msdn.microsoft.com/library/055e1155-2d4d-4c85-b44e-d406872ba595%28Office.15%29.aspx)    
- [<span data-ttu-id="aee7b-168">在 Exchange 控制对 EWS 的访问</span><span class="sxs-lookup"><span data-stu-id="aee7b-168">Control access to EWS in Exchange</span></span>](how-to-control-access-to-ews-in-exchange.md)    
- [<span data-ttu-id="aee7b-169">在 Exchange 控制客户端应用程序访问 EWS</span><span class="sxs-lookup"><span data-stu-id="aee7b-169">Controlling client application access to EWS in Exchange</span></span>](controlling-client-application-access-to-ews-in-exchange.md)    
- [<span data-ttu-id="aee7b-170">支持的令牌和声明类型</span><span class="sxs-lookup"><span data-stu-id="aee7b-170">Supported Token and Claim Types</span></span>](http://msdn.microsoft.com/library/9d35e4bc-7b72-49d1-b723-5464eee6be2c%28Office.15%29.aspx)
    

